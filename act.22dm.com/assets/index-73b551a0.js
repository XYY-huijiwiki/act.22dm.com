import{R as e,_ as t,d as a,u as l,r as o,g as s,b as d,e as p,S as c,J as r,C as n,U as i,L as u,D as v,f,h as y,p as m,o as g,c as k,j as h,x as b,y as $,z as x,k as z,l as w,T as C,n as j,F as I,q as S,v as _,m as L,w as T,t as B,V as R,A as E,B as U,H as N,K,N as F,a as O,O as M,P as V,Q as q}from"./index-87c9ba8f.js";import{w as A}from"./wxjssdk-bba02966.js";import{g as J}from"./sign-54d406fa.js";import{s as D,h as H}from"./loading-4bd1cf31.js";const P=e=>(M("data-v-2a0589fb"),e=e(),V(),e),Q={id:"page-202507"},G={key:0,id:"mm",class:"scene-layer bg-mm"},W=P((()=>h("div",{class:"icon-mm-title"},null,-1))),X=[P((()=>h("div",{class:"icon-mm-role"},null,-1)))],Y=P((()=>h("div",{class:"mm-top"},[h("span",{class:"icon-logo"}),h("span",{class:"icon-logo-line"}),h("span",{class:"icon-logo2"})],-1))),Z={class:"mm-bottom"},ee={class:"mm-bottom-2"},te=P((()=>h("span",{class:"icon-role-2"},null,-1))),ae={class:"icon-face-1"},le={class:"icon-face-2"},oe={key:0,class:"icon-role-hand-3"},se={key:1,class:"icon-role-hand-1"},de={key:3,class:"icon-role-hand-2"},pe=P((()=>h("span",{id:"hand-check"},null,-1))),ce=P((()=>h("span",{id:"hand-dot"},null,-1))),re={key:1,class:"icon-role-1"},ne={key:0,class:"icon-role-special"},ie=["id"],ue=["id"],ve={class:"icon-topbar-time"},fe={class:"icon-topbar-score"},ye={id:"page-dialogs",class:"scene-layer"},me={key:0,class:"dialogs-record"},ge={class:j("bg-record")},ke={class:"recode-tab"},he={key:0,class:"recode-list"},be=["onClick"],$e=["src"],xe={key:1,class:"recode-list"},ze=["onClick"],we=["src"],Ce={key:0},je={class:"dialogs-puzzle"},Ie={class:"bg-puzzle"},Se={class:"puzzle-content"},_e=["src"],Le=[P((()=>h("div",{class:j("bg-rule")},null,-1)))],Te=[P((()=>h("div",{class:j("bg-date")},null,-1)))],Be={class:"dialogs-rank bg-rank"},Re={class:"rank-list"},Ee=P((()=>h("span",{class:"rank-item-num"},null,-1))),Ue={class:"rank-item-name"},Ne={class:"rank-item-score"},Ke=P((()=>h("i",{class:j("num-rank-fen")},null,-1))),Fe={key:0},Oe={class:"dialogs-game-over"},Me={key:0,class:"game-over-score"},Ve={key:0},qe={class:"dialogs-pause"},Ae={key:0,class:"bg-guide-1"},Je={key:1,class:"bg-guide-2"},De={key:1,class:j("bg-game-tips")},He={class:"game-tips-title-text"},Pe={key:2,class:"game-tips-content"},Qe=P((()=>h("br",null,null,-1))),Ge={key:3,class:"game-tips-content"},We=P((()=>h("br",null,null,-1))),Xe=[P((()=>h("div",{class:"dialogs-share icon-share"},null,-1)))],Ye={key:0,class:"mask"},Ze={class:"dialogs-address bg-address"},et={id:"audio-list"},tt=["id","src","loop"],at=U('<div style="" data-v-2a0589fb><span class="icon-role-1" data-v-2a0589fb></span><span class="icon-role-2" data-v-2a0589fb></span><span class="icon-face-1" data-v-2a0589fb></span><span class="icon-face-2" data-v-2a0589fb></span><span class="icon-d-8" data-v-2a0589fb></span></div>',1),lt=t(a({__name:"index",setup(t){var a;let U,M,V,P="https://cpe-oss-h5.oss-cn-shenzhen.aliyuncs.com/h5/202507/vvv/image";const{proxy:lt}=q();let ot=new A({});const st=l();let dt="",pt=o({maxLevel:13,skin:[1,1,1,1,1,1,2,2,2,3,3,3,4,4,4],levelScore:[3,4,5,5,5,5,5,6,6,6,6,6,6,6,6],levelTime:[60,60,60,60,60,60,60,60,60,60,60,60,60,60,60],puzzleIdList:[11,12],puzzleImgList:["1.jpg","2.jpg","3.jpg","4.jpg","5-0706.jpg","6-0706.jpg","7.jpg","8.jpg","9.jpg","10.jpg","11.jpg","12.jpg","13.jpg","14.jpg","15.jpg","16.jpg","17.jpg","18.jpg","19.jpg","20.jpg","21.jpg","22.jpg"],whiteList:[],speedFly:350,everyLevelScore:3e3,everyTimeScore:50,everyFindScore:200,skinTitle:["布拉拉国","蓝星世界","花花树世界","绘本世界"],showRank:0,levetTips:[[1,2],[1,3],[1,4],[1,4],[4,1],[2,3],[2,3],[3,3],[3,3],[2,4],[3,3],[3,3],[3,3],[3,3],[3,3]],giftTime:15});const ct=(null==(a=st.params)?void 0:a.userInfo)??{};V=(null==ct?void 0:ct.unionid)??"";const rt=o("mm"),nt=o(""),it=o([]),ut=o(s(1600)),vt=o(s(1600)),ft=o(0),yt=o(!1),mt=o(!1),gt=o(1),kt=o(0),ht=o([]),bt=o(0),$t=o([]),xt=o(!1),zt=o(!1),wt=o([]),Ct=o(null),jt=o(null),It=o(),St=o(1),_t=o(null),Lt=o([]),Tt=o(!1),Bt=o(!1),Rt=o(!1);let Et=null,Ut=null;const Nt=d({volume:!1,audioList:[{name:"bgm",src:`${P}/audio/bgm.mp3`,loop:!0},{name:"hand-down",src:`${P}/audio/hand-down.mp3`,loop:!1},{name:"good",src:`${P}/audio/good.mp3`,loop:!1},{name:"bad",src:`${P}/audio/bad.mp3`,loop:!1}]}),Kt=o({phone:"",name:"",address:""}),Ft=p((()=>pt.value.whiteList.includes(V)?pt.value.levelScore.length:pt.value.maxLevel));c(kt,(e=>{e>=(Tt.value?5:pt.value.levelScore[gt.value-1])&&(!Tt.value&&gt.value<Ft.value||Tt.value&&gt.value<=1?Mt(!0):Ht(!0))}));const Ot=p((()=>{try{const e=new Map;Lt.value.forEach((t=>{e.has(t.id)||e.set(t.id,new Set),e.get(t.id).add(t.type)}));const t=[];for(const[a,l]of e.entries())[1,2,3,4].every((e=>l.has(e)))&&t.push(a);return t}catch(e){return[]}})),Mt=(t=!1)=>{t?($t.value.push(bt.value),ht.value.push(kt.value),gt.value++):(gt.value=1,ht.value=[],$t.value=[]),kt.value=0,yt.value=!1,rt.value="game",nt.value=`game-tips-${gt.value}`,mt.value=!1,zt.value=!1,wt.value=((t,a=!1)=>{let l;return a?1===t?l=[{type:16,scale:1,rotate:0,top:50,left:280,dead:0,score:1},{type:17,scale:1,rotate:0,top:370,left:30,dead:0,score:1},{type:18,scale:1,rotate:0,top:400,left:480,dead:0,score:1},{type:15,scale:1,rotate:0,top:0,left:30,dead:0},{type:15,scale:1,rotate:0,top:30,left:450,dead:0},{type:15,scale:1,rotate:0,top:200,left:50,dead:0},{type:15,scale:1,rotate:0,top:220,left:220,dead:0},{type:15,scale:1,rotate:0,top:220,left:600,dead:0},{type:20,scale:1,rotate:0,top:450,left:250,dead:0,score:1},{type:19,scale:1,rotate:0,top:500,left:100,dead:0,score:1},{type:15,scale:1,rotate:0,top:650,left:330,dead:0},{type:15,scale:1,rotate:0,top:700,left:600,dead:0}]:2===t&&(l=[{type:15,scale:.9,rotate:0,top:50,left:280,dead:0,score:1},{type:16,scale:1,rotate:0,top:370,left:30,dead:0,score:1},{type:17,scale:1,rotate:0,top:550,left:150,dead:0,score:1},{type:18,scale:1,rotate:0,top:580,left:480,dead:0,score:1},{type:19,scale:1,rotate:0,top:380,left:520,dead:0,score:1},{type:15,scale:.9,rotate:0,top:0,left:30,dead:0},{type:15,scale:.9,rotate:0,top:30,left:450,dead:0},{type:15,scale:.9,rotate:0,top:200,left:50,dead:0},{type:20,scale:1,rotate:0,top:220,left:220,dead:0},{type:15,scale:1,rotate:0,top:220,left:600,dead:0},{type:15,scale:1.3,rotate:0,top:400,left:330,dead:0},{type:15,scale:1,rotate:0,top:700,left:100,dead:0}]):1===t?l=[{type:6,scale:.5,rotate:0,top:50,left:280,dead:0,score:1},{type:9,scale:.5,rotate:0,top:370,left:30,dead:0,score:1},{type:12,scale:.6,rotate:0,top:400,left:480,dead:0,score:1},{type:3,scale:.7,rotate:0,top:0,left:30,dead:0},{type:3,scale:.5,rotate:0,top:30,left:450,dead:0},{type:3,scale:.4,rotate:0,top:200,left:50,dead:0},{type:3,scale:.9,rotate:0,top:220,left:220,dead:0},{type:3,scale:.6,rotate:0,top:220,left:600,dead:0},{type:3,scale:.5,rotate:0,top:500,left:300,dead:0},{type:3,scale:.5,rotate:0,top:700,left:100,dead:0},{type:3,scale:.6,rotate:0,top:650,left:330,dead:0},{type:3,scale:.5,rotate:0,top:700,left:600,dead:0}]:2===t?l=[{type:6,scale:.5,rotate:0,top:50,left:280,dead:0,score:1},{type:10,scale:.5,rotate:0,top:370,left:30,dead:0,score:1},{type:11,scale:.6,rotate:0,top:550,left:150,dead:0,score:1},{type:13,scale:.6,rotate:0,top:580,left:480,dead:0,score:1},{type:12,scale:.6,rotate:0,top:380,left:520,dead:0,score:1},{type:3,scale:.7,rotate:0,top:0,left:30,dead:0},{type:3,scale:.5,rotate:0,top:30,left:450,dead:0},{type:3,scale:.4,rotate:0,top:200,left:50,dead:0},{type:3,scale:.9,rotate:0,top:220,left:220,dead:0},{type:3,scale:.6,rotate:0,top:220,left:600,dead:0},{type:3,scale:.5,rotate:0,top:500,left:300,dead:0},{type:3,scale:.5,rotate:0,top:700,left:100,dead:0}]:3===t?l=[{type:6,scale:.5,rotate:0,top:580,left:260,dead:0,score:1},{type:9,scale:.5,rotate:0,top:320,left:30,dead:0,score:1},{type:11,scale:.6,rotate:0,top:600,left:80,dead:0,score:1},{type:12,scale:.6,rotate:0,top:150,left:300,dead:0,score:1},{type:14,scale:.6,rotate:0,top:500,left:550,dead:0,score:1},{type:3,scale:.6,rotate:0,top:180,left:40,dead:0},{type:3,scale:.7,rotate:0,top:0,left:550,dead:0},{type:3,scale:.55,rotate:0,top:350,left:570,dead:0},{type:3,scale:.6,rotate:0,top:470,left:60,dead:0},{type:3,scale:.9,rotate:0,top:0,left:30,dead:0},{type:3,scale:.5,rotate:0,top:0,left:350,dead:0},{type:3,scale:.6,rotate:0,top:220,left:600,dead:0},{type:3,scale:.5,rotate:0,top:350,left:300,dead:0},{type:3,scale:.7,rotate:0,top:470,left:300,dead:0},{type:3,scale:.6,rotate:0,top:650,left:330,dead:0},{type:3,scale:.5,rotate:0,top:700,left:600,dead:0}]:4===t?l=[{type:6,scale:.5,rotate:0,top:150,left:600,dead:0,score:1},{type:9,scale:.5,rotate:0,top:450,left:100,dead:0,score:1},{type:10,scale:.48,rotate:0,top:150,left:150,dead:0,score:1},{type:14,scale:.5,rotate:0,top:350,left:300,dead:0,score:1},{type:13,scale:.5,rotate:0,top:600,left:550,dead:0,score:1},{type:3,scale:.7,rotate:0,top:80,left:0,dead:0},{type:3,scale:.7,rotate:0,top:0,left:120,dead:0},{type:3,scale:.8,rotate:0,top:0,left:500,dead:0},{type:3,scale:.7,rotate:0,top:300,left:30,dead:0},{type:3,scale:.75,rotate:0,top:180,left:350,dead:0},{type:3,scale:.8,rotate:0,top:300,left:560,dead:0},{type:3,scale:.7,rotate:0,top:450,left:550,dead:0},{type:3,scale:.9,rotate:0,top:550,left:280,dead:0},{type:3,scale:.8,rotate:0,top:600,left:50,dead:0}]:5===t?l=[{type:9,scale:.55,rotate:0,top:300,left:550,dead:0,score:1},{type:7,scale:.5,rotate:0,top:100,left:80,dead:0,gift:0},{type:7,scale:.5,rotate:0,top:420,left:250,dead:0,score:1},{type:6,scale:.5,rotate:0,top:300,left:350,dead:0,score:1},{type:6,scale:.5,rotate:0,top:630,left:420,dead:0,score:1},{type:6,scale:.5,rotate:0,top:650,left:150,dead:0,score:1},{type:3,scale:.55,rotate:0,top:370,left:30,dead:0},{type:3,scale:.6,rotate:0,top:480,left:500,dead:0},{type:3,scale:.8,rotate:0,top:-20,left:110,dead:0},{type:3,scale:.6,rotate:0,top:0,left:500,dead:0},{type:3,scale:.7,rotate:0,top:230,left:20,dead:0},{type:3,scale:.7,rotate:0,top:150,left:520,dead:0},{type:3,scale:.6,rotate:0,top:300,left:200,dead:0},{type:3,scale:.65,rotate:0,top:530,left:50,dead:0},{type:3,scale:.7,rotate:0,top:650,left:250,dead:0},{type:3,scale:.7,rotate:0,top:750,left:450,dead:0}]:6===t?l=[{type:9,scale:.6,rotate:0,top:400,left:30,dead:0,score:1},{type:11,scale:.6,rotate:0,top:300,left:550,dead:0,score:1},{type:13,scale:.55,rotate:0,top:620,left:550,dead:0,score:1},{type:7,scale:.7,rotate:0,top:600,left:200,dead:0,score:1},{type:7,scale:.6,rotate:0,top:180,left:30,dead:0,gift:0},{type:7,scale:.6,rotate:0,top:100,left:530,dead:0,gift:0},{type:6,scale:.5,rotate:0,top:300,left:350,dead:0,score:1},{type:3,scale:.8,rotate:0,top:0,left:20,dead:0},{type:3,scale:.75,rotate:0,top:-20,left:520,dead:0},{type:3,scale:.7,rotate:0,top:150,left:200,dead:0},{type:3,scale:.7,rotate:0,top:150,left:370,dead:0},{type:3,scale:.8,rotate:0,top:450,left:300,dead:0},{type:3,scale:.7,rotate:0,top:480,left:550,dead:0},{type:3,scale:.7,rotate:0,top:600,left:50,dead:0}]:7===t?l=[{type:7,scale:.5,rotate:0,top:150,left:530,dead:0,gift:0},{type:7,scale:.5,rotate:0,top:550,left:600,dead:0,gift:2},{type:6,scale:.5,rotate:0,top:150,left:230,dead:0,score:1},{type:6,scale:.5,rotate:0,top:450,left:170,dead:0,score:1},{type:10,scale:.5,rotate:0,top:300,left:50,dead:0,score:1},{type:9,scale:.5,rotate:0,top:370,left:500,dead:0,score:1},{type:12,scale:.5,rotate:0,top:650,left:300,dead:0,score:1},{type:1,scale:.7,rotate:0,top:40,left:100,dead:0},{type:1,scale:.6,rotate:0,top:30,left:470,dead:0},{type:1,scale:.4,rotate:0,top:330,left:230,dead:0},{type:1,scale:.55,rotate:0,top:480,left:300,dead:0},{type:1,scale:.55,rotate:0,top:600,left:80,dead:0}]:8===t?l=[{type:7,scale:.5,rotate:0,top:100,left:480,dead:0,gift:0},{type:7,scale:.5,rotate:0,top:550,left:600,dead:0,score:1},{type:7,scale:.5,rotate:0,top:130,left:50,dead:0,gift:2},{type:6,scale:.5,rotate:0,top:150,left:230,dead:0,score:1},{type:6,scale:.5,rotate:0,top:450,left:170,dead:0,score:1},{type:6,scale:.5,rotate:0,top:220,left:600,dead:0,score:1},{type:9,scale:.5,rotate:0,top:300,left:50,dead:0,score:1},{type:10,scale:.5,rotate:0,top:370,left:500,dead:0,score:1},{type:11,scale:.5,rotate:0,top:650,left:300,dead:0,score:1},{type:1,scale:.7,rotate:0,top:40,left:30,dead:0},{type:1,scale:.7,rotate:0,top:-80,left:180,dead:0},{type:1,scale:.6,rotate:0,top:30,left:470,dead:0},{type:1,scale:.5,rotate:0,top:330,left:230,dead:0},{type:1,scale:.55,rotate:0,top:480,left:300,dead:0},{type:1,scale:.55,rotate:0,top:600,left:80,dead:0}]:9===t?l=[{type:7,scale:.5,rotate:0,top:90,left:550,dead:0,score:1},{type:7,scale:.5,rotate:0,top:100,left:280,dead:0,gift:2},{type:7,scale:.5,rotate:0,top:550,left:600,dead:0,score:1},{type:6,scale:.5,rotate:0,top:120,left:70,dead:0,score:1},{type:6,scale:.5,rotate:0,top:450,left:30,dead:0,score:1},{type:6,scale:.5,rotate:0,top:530,left:500,dead:0,score:1},{type:14,scale:.5,rotate:0,top:270,left:50,dead:0,score:1},{type:13,scale:.5,rotate:0,top:330,left:550,dead:0,score:1},{type:11,scale:.5,rotate:0,top:620,left:300,dead:0,score:1},{type:1,scale:.7,rotate:0,top:-30,left:100,dead:0},{type:1,scale:.6,rotate:0,top:-30,left:470,dead:0},{type:1,scale:.5,rotate:0,top:330,left:230,dead:0},{type:1,scale:.5,rotate:0,top:260,left:430,dead:0},{type:1,scale:.55,rotate:0,top:480,left:300,dead:0},{type:1,scale:.55,rotate:0,top:600,left:80,dead:0}]:10===t?l=[{type:2,scale:.7,rotate:0,top:20,left:160,dead:0},{type:2,scale:.7,rotate:0,top:150,left:30,dead:0},{type:2,scale:.7,rotate:0,top:150,left:500,dead:0},{type:2,scale:.7,rotate:0,top:700,left:100,dead:0},{type:7,scale:.55,rotate:0,top:250,left:120,dead:0,score:1},{type:7,scale:.55,rotate:0,top:400,left:600,dead:0,gift:3},{type:13,scale:.5,rotate:0,top:400,left:50,dead:0,score:1},{type:12,scale:.5,rotate:0,top:280,left:570,dead:0,score:1},{type:11,scale:.5,rotate:0,top:600,left:570,dead:0,score:1},{type:14,scale:.5,rotate:0,top:530,left:150,dead:0,score:1},{type:9,scale:.5,rotate:0,top:600,left:350,dead:0,score:1},{type:5,dead:0,score:1,top:-80,left:320},{type:5,dead:0,score:1,top:170,left:200}]:11===t?l=[{type:2,scale:.7,rotate:0,top:20,left:160,dead:0},{type:2,scale:.7,rotate:0,top:150,left:30,dead:0},{type:2,scale:.7,rotate:0,top:150,left:500,dead:0},{type:2,scale:.7,rotate:0,top:700,left:100,dead:0},{type:7,scale:.55,rotate:0,top:250,left:120,dead:0,gift:3},{type:7,scale:.55,rotate:0,top:400,left:600,dead:0,score:1},{type:9,scale:.5,rotate:0,top:400,left:50,dead:0,score:1},{type:10,scale:.5,rotate:0,top:600,left:570,dead:0,score:1},{type:11,scale:.5,rotate:0,top:550,left:150,dead:0,score:1},{type:12,scale:.5,rotate:0,top:600,left:350,dead:0,score:1},{type:5,dead:0,score:1,top:-80,left:320,move:1,p:"1"},{type:5,dead:0,score:1,top:170,left:200,move:1,p:"2"},{type:5,dead:0,score:1,top:330,left:150,move:1,p:"3"}]:12===t?l=[{type:2,scale:.7,rotate:0,top:220,left:180,dead:0},{type:2,scale:.7,rotate:0,top:0,left:30,dead:0},{type:2,scale:.7,rotate:0,top:0,left:500,dead:0},{type:2,scale:.7,rotate:0,top:700,left:100,dead:0},{type:7,scale:.55,rotate:0,top:60,left:150,dead:0,gift:3},{type:7,scale:.55,rotate:0,top:380,left:420,dead:0,score:1},{type:9,scale:.5,rotate:0,top:150,left:20,dead:0,score:1},{type:10,scale:.5,rotate:0,top:280,left:570,dead:0,score:1},{type:11,scale:.5,rotate:0,top:550,left:60,dead:0,score:1},{type:12,scale:.5,rotate:0,top:530,left:580,dead:0,score:1},{type:5,dead:0,score:1,top:20,left:320,move:1,p:"1"},{type:5,dead:0,score:1,top:270,left:-50,move:1,p:"2"},{type:5,dead:0,score:1,top:470,left:110,move:1,p:"3"}]:13===t?l=[{type:2,scale:.7,rotate:0,top:20,left:160,dead:0},{type:2,scale:.7,rotate:0,top:150,left:30,dead:0},{type:2,scale:.7,rotate:0,top:150,left:500,dead:0},{type:2,scale:.7,rotate:0,top:700,left:100,dead:0},{type:2,scale:.5,rotate:0,top:550,left:150,dead:0},{type:7,scale:.45,rotate:0,top:250,left:120,dead:0},{type:7,scale:.45,rotate:0,top:400,left:600,dead:0},{type:13,scale:.4,rotate:0,top:400,left:50,dead:0,score:1},{type:12,scale:.4,rotate:0,top:280,left:570,dead:0,score:1},{type:11,scale:.4,rotate:0,top:600,left:570,dead:0,score:1},{type:14,scale:.4,rotate:0,top:580,left:10,dead:0,score:1},{type:9,scale:.4,rotate:0,top:600,left:350,dead:0,score:1},{type:5,dead:0,top:-80,left:320,score:1,p:"1"},{type:5,dead:0,top:170,left:200,score:1,p:"2"},{type:5,dead:0,top:330,left:100,score:1,p:"3"}]:14===t?l=[{type:2,scale:.7,rotate:0,top:20,left:160,dead:0},{type:2,scale:.7,rotate:0,top:150,left:30,dead:0},{type:2,scale:.7,rotate:0,top:150,left:500,dead:0},{type:2,scale:.7,rotate:0,top:700,left:100,dead:0},{type:2,scale:.5,rotate:0,top:550,left:150,dead:0},{type:7,scale:.45,rotate:0,top:250,left:120,dead:0},{type:7,scale:.45,rotate:0,top:400,left:600,dead:0,score:1},{type:13,scale:.4,rotate:0,top:400,left:50,dead:0,score:1},{type:11,scale:.4,rotate:0,top:600,left:570,dead:0,score:1},{type:14,scale:.4,rotate:0,top:580,left:10,dead:0,score:1},{type:9,scale:.4,rotate:0,top:600,left:350,dead:0,score:1},{type:5,dead:0,top:-80,left:320,score:1,p:"1",move:1},{type:5,dead:0,top:170,left:200,score:1,p:"2",move:1},{type:5,dead:0,top:330,left:100,score:1,p:"3",move:1}]:15===t&&(l=[{type:2,scale:.7,rotate:0,top:20,left:450,dead:0},{type:2,scale:.7,rotate:0,top:150,left:30,dead:0},{type:2,scale:.7,rotate:0,top:150,left:500,dead:0},{type:2,scale:.7,rotate:0,top:700,left:100,dead:0},{type:2,scale:.5,rotate:0,top:550,left:150,dead:0},{type:7,scale:.45,rotate:0,top:250,left:120,gift:3},{type:7,scale:.45,rotate:0,top:400,left:600,dead:0,score:1},{type:11,scale:.4,rotate:0,top:600,left:570,dead:0,score:1},{type:14,scale:.4,rotate:0,top:580,left:10,dead:0,score:1},{type:9,scale:.4,rotate:0,top:600,left:350,dead:0,score:1},{type:5,dead:0,top:-80,left:0,score:1,p:"1",move:1},{type:5,dead:0,top:170,left:200,score:1,p:"2",move:1},{type:5,dead:0,top:310,left:0,score:1,p:"3",move:1}]),e(JSON.parse(JSON.stringify(l)))})(gt.value,Tt.value),Vt()},Vt=()=>{Et&&clearInterval(Et),Et=null,bt.value=Tt.value?60:pt.value.levelTime[gt.value-1],Et=setInterval((()=>{nt.value||bt.value--,bt.value<=0&&(Et&&clearInterval(Et),Et=null,Ht(!1))}),1e3)},qt=()=>{let e=document.getElementById("hand-check"),t=document.getElementById("hand-box");if(!e||!t)return;const a=window.getComputedStyle(t).height;let l=e.getBoundingClientRect();const{x:o,y:s,width:d}=l;if(1===ft.value){if(o<0||o+d>750||"1120px"===a)return void(ft.value=2);{let e=document.getElementById("game-main"),t=document.getElementById("hand-dot");if(!e||!t)return;const a=t.getBoundingClientRect(),{x:l,y:o}=a;Array.from(e.children).forEach(((e,t)=>{const a=e.getBoundingClientRect(),{left:s,right:d,bottom:p,top:c}=a;if(!wt.value[t].dead&&l>s&&l<d&&o>c&&o<p)return Ct.value=wt.value[t],Ct.value.dead=1,ft.value=2,void(wt.value[t].score||7===wt.value[t].type?Wt("good"):Wt("bad"))}))}}else 2===ft.value&&Math.abs(parseInt(a)-parseInt("100px"))<=5&&At()},At=()=>{if(Ut&&clearInterval(Ut),Ut=null,ft.value=0,Ct.value&&!mt.value){const{type:e,score:t=0,gift:a=0}=Ct.value;if(kt.value+=t,2===a){for(let l=0;l<wt.value.length;l++)if(7!==wt.value[l].type&&!wt.value[l].dead&&!wt.value[l].score){Jt(l);break}}else 3===a&&(bt.value+=pt.value.giftTime);setTimeout((()=>{Ct.value=null}),100)}},Jt=e=>{const t=document.getElementById("hand-dot"),a=document.getElementById(`icon-index-${e}`);if(!t||!a)return;const l=wt.value[e],o=t.getBoundingClientRect(),s=a.getBoundingClientRect(),{left:d,top:p}=s;jt.value={target:l,startRect:o,endRect:s},N((()=>{const e=document.getElementById("game-fly");if(!e)return;e.animate([{top:p+"px",left:d+"px",rotate:"360deg"}],{duration:pt.value.speedFly,iterations:1,easing:"linear",fill:"forwards"}).onfinish=()=>{jt.value=null,l.dead=1}}))},Dt=e=>{nt.value=e,"pause"===e&&(yt.value=!0)},Ht=(e=!1)=>{Et&&clearInterval(Et),Et=null,mt.value=!0,zt.value=e,$t.value.push(bt.value),ht.value.push(kt.value);const t=10*gt.value+kt.value,a=$t.value.reduce(((e,t)=>e+t),0);let l=0;l+=gt.value*pt.value.everyLevelScore,l+=ht.value.reduce(((e,t)=>e+t),0)*pt.value.everyFindScore,l+=$t.value.reduce(((e,t)=>e+t),0)*pt.value.everyTimeScore,It.value=l,_t.value=null;const o={};let s=J({k:dt,unionid:V,score:l,level:t});if(Tt.value)nt.value=e?"success":"fail",e&&r({ownerUnionid:V,activityKey:"20250726",gameScore:l,levelNum:t,playTime:a,extra:{type:"game"},k:dt,s:s});else{if(e){const e=pt.value.puzzleIdList[n(0,pt.value.puzzleIdList.length-1)],t=n(1,4);_t.value={id:e,type:t},nt.value="puzzle",o.puzzle={..._t.value}}else nt.value=e?"success":"fail";r({ownerUnionid:V,activityKey:U,gameScore:l,levelNum:t,playTime:a,k:dt,s:s,extra:o}).then((()=>{Gt(),Qt()}))}},Pt=e=>{nt.value="",yt.value=!1,1===e?(Tt.value=!1,rt.value="mm",Et&&clearInterval(Et),Et=null):2===e&&Mt()},Qt=()=>{pt.value.showRank&&i({activityKey:U,periodNum:M,unionid:V,k:dt,endTime:"2025-08-01 00:00:00",rankSize:10}).then((({code:e,data:t})=>{0===e&&(it.value=t,t.some((e=>e.ownerUnionid===V))&&u({unionid:V,activityKey:U,periodNum:M}).then((({code:e,data:t})=>{0===e&&((null==t?void 0:t.name)?Rt.value=!0:nt.value="address")})))}))},Gt=()=>{v({activityKey:U,periodNum:M,ownerUnionid:V}).then((({code:e,data:t})=>{if(null==t?void 0:t.length){const e=[];t.map((t=>{var a;(null==(a=null==t?void 0:t.extra)?void 0:a.puzzle)&&e.push(t.extra.puzzle)}));const a=new Map;e.forEach((e=>{const t=`${e.id}_${e.type}`;a.has(t)?a.get(t).count++:a.set(t,{...e,count:1})})),Lt.value=Array.from(a.values())}}))},Wt=(e,t=!1)=>{F(Nt,e,t)},Xt=e=>{const t=1e3*(1-ut.value)/1.3;if("game-main"===e)return{bottom:`-${t}px`};if("game-bg"===e)return{top:-t+"px"};if("game-top"===e){let e=1100;return O()&&(e=990,window.innerHeight>=1710&&(e=1100)),{bottom:e-1.08*t+"px"}}},Yt=e=>{ot.onSaveImage(e).then((e=>{Zt(e)})).catch((e=>{Zt(e)}))},Zt=e=>{lt.$Message.success(e)};return f((()=>{var e,t,a;Tt.value="1"===(null==(e=st.query)?void 0:e.special),U=(null==(t=st.meta)?void 0:t.activityKey)??"202507",M=(null==(a=st.meta)?void 0:a.periodNum)??1,Tt.value&&Mt(),y({activityKey:U}).then((({code:e,data:t})=>{0===e&&(dt=t.k,t.extra&&(pt.value=t.extra),Gt(),Qt())})),ot.ready((()=>{var e,t,a;Wt("bgm",!0),ot.updateShareData({title:(null==(e=st.meta)?void 0:e.title)??"",desc:(null==(t=st.meta)?void 0:t.desc)??"",link:location.origin+st.path,imgUrl:(null==(a=st.meta)?void 0:a.imgUrl)??""}),document.addEventListener("visibilitychange",(e=>{document.hidden?m():Nt.volume&&Wt("bgm",!0)}))}))})),(e,t)=>(g(),k(I,null,[h("div",Q,[b(C,{name:"fade"},{default:$((()=>["mm"==rt.value?(g(),k("div",G,[W,h("div",{class:"mm-role-box",style:x(`transform:scale(${ut.value})`)},X,4),Y,h("div",Z,[h("span",{class:"btn-start",onClick:t[0]||(t[0]=e=>(rt.value="game",void Mt()))}),h("span",{class:"btn-rule",onClick:t[1]||(t[1]=e=>Dt("rule"))})]),h("div",ee,[h("div",{class:"btn-record",onClick:t[2]||(t[2]=e=>Dt("record"))}),h("div",{class:"btn-date",onClick:t[3]||(t[3]=e=>Dt("date"))}),h("div",{class:"btn-rank",onClick:t[4]||(t[4]=e=>z(pt).showRank?Dt("rank"):Zt("「狂野」排行榜将在7月14日开启哦！"))})])])):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>{var e;return["game"===rt.value?(g(),k("div",{key:0,id:"game",class:j({"moving-down":1===ft.value,"moving-up":2===ft.value,"has-fish":Ct.value,"moving-up-solw":Ct.value&&(Ct.value.type<=4||15===Ct.value.type)})},[h("div",{class:j(["game-bg",`bg-game-${Tt.value?5:z(pt).skin[gt.value-1]}`]),style:x(Xt("game-bg"))},null,6),h("div",{id:"game-top",style:x(Xt("game-top"))},[h("div",{id:"game-role",class:j([{rotate:!ft.value&&!nt.value},`level-${gt.value}${Tt.value?"-special":""}`])},[Tt.value?w("",!0):(g(),k(I,{key:0},[te,S(h("span",ae,null,512),[[_,2!==ft.value]]),S(h("span",le,null,512),[[_,2===ft.value]])],64)),h("div",{id:"hand-box",class:j({special:Tt.value})},[Tt.value?(g(),k("span",oe)):w("",!0),Tt.value?w("",!0):(g(),k("span",se)),(null==(e=Ct.value)?void 0:e.type)?(g(),k("span",{key:2,id:"hand-fish",class:j([`icon-d-${Ct.value.type}${(Ct.value.type>=9||5===Ct.value.type||4===Ct.value.type)&&!Tt.value?"-1":""}`,{special:Tt.value}])},null,2)):w("",!0),Tt.value?w("",!0):(g(),k("span",de)),pe,ce],2),Tt.value?w("",!0):(g(),k("span",re))],2),Tt.value?(g(),k("div",ne)):w("",!0)],4),h("div",{id:"game-main",style:x(Xt("game-main"))},[(g(!0),k(I,null,L(wt.value,((e,t)=>(g(),k(I,{key:"fish-"+t},[e.move?(g(),k("span",{key:1,id:"icon-index-"+t,class:j([`icon-d-${e.type}`,`p-${e.p}`,{dead:e.dead}]),style:x(`\n                                top:${e.top}px;\n                                left:${e.left}px;\n                            `)},null,14,ue)):(g(),k("span",{key:0,id:"icon-index-"+t,class:j([`icon-d-${e.type}`,{dead:e.dead}]),style:x(`\n                                transform:scale(${e.scale}) rotate(${e.rotate}deg);\n                                top:${e.top}px;\n                                left:${e.left}px;\n                            `)},null,14,ie))],64)))),128))],4),h("div",{id:"game-touch",onTouchstart:t[5]||(t[5]=e=>{ft.value||(ft.value=1,Ct.value=null,Ut=setInterval((()=>{qt()}),50),Wt("hand-down"))})},null,32),jt.value?(g(),k("div",{key:0,id:"game-fly",class:"icon-d-8",style:x(`\n                    top:${jt.value.startRect.top}px;\n                    left:${jt.value.startRect.left}px;\n                `)},null,4)):w("",!0),h("span",{class:"btn-pause",onClick:t[6]||(t[6]=T((e=>Dt("pause")),["stop"]))}),h("span",ve,B(bt.value)+"s",1),h("span",fe,B(kt.value)+" / "+B(Tt.value?5:z(pt).levelScore[gt.value-1]),1)],2)):w("",!0)]})),_:1}),S(h("div",ye,[b(C,{name:"fade"},{default:$((()=>["record"===nt.value?(g(),k("div",me,[h("div",ge,[h("div",ke,[h("span",{onClick:t[7]||(t[7]=e=>St.value=1),class:j({active:1===St.value})},"已收集",2),h("span",{onClick:t[8]||(t[8]=e=>St.value=2),class:j({active:2===St.value})},"已解锁",2)]),1===St.value?(g(),k("div",he,[(g(!0),k(I,null,L(Lt.value,((e,t)=>(g(),k("span",{class:"recode-item",key:"record-item-"+t,onClick:t=>Yt(`${z(P)}/w/${e.id}-${e.type}.png`)},[h("img",{src:`${z(P)}/w/${e.id}-${e.type}.png`},null,8,$e)],8,be)))),128))])):w("",!0),2===St.value?(g(),k("div",xe,[(g(!0),k(I,null,L(Ot.value,((e,t)=>(g(),k("span",{class:"recode-item",key:"finish-item-"+t,onClick:t=>Yt(`${z(P)}/w/${z(pt).puzzleImgList[e-1]}`)},[h("img",{src:`${z(P)}/w/${z(pt).puzzleImgList[e-1]}`},null,8,we)],8,ze)))),128))])):w("",!0),h("span",{class:"dialogs-close",onClick:t[9]||(t[9]=e=>Dt(""))})])])):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>["puzzle"===nt.value?(g(),k("div",Ce,[h("div",je,[h("div",Ie,[h("div",Se,[h("img",{src:`${z(P)}/w/${_t.value.id}-${_t.value.type}.png`},null,8,_e)]),h("span",{class:"dialogs-close",onClick:t[10]||(t[10]=e=>Dt(zt.value?"success":"fail"))}),h("span",{class:"puzzle-save",onClick:t[11]||(t[11]=e=>Yt(`${z(P)}/w/${_t.value.id}-${_t.value.type}.png`))}),h("span",{class:"puzzle-back",onClick:t[12]||(t[12]=e=>Dt(zt.value?"success":"fail"))})])])])):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>["rule"===nt.value?(g(),k("div",{key:0,class:"dialogs-rule",onClick:t[13]||(t[13]=T((e=>Dt("")),["stop"])),style:x(`transform:scale(${vt.value})`)},Le,4)):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>["date"===nt.value?(g(),k("div",{key:0,class:"dialogs-date",onClick:t[14]||(t[14]=T((e=>Dt("")),["stop"]))},Te)):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>["rank"===nt.value?(g(),k("div",{key:0,style:x(`transform:scale(${vt.value})`)},[h("div",Be,[h("span",{class:"rank-close",onClick:t[15]||(t[15]=e=>Dt(""))}),h("div",Re,[(g(!0),k(I,null,L(it.value,((e,t)=>{var a;return g(),k("span",{class:j(["rank-item",`num-rank-head-${t+1}`]),key:"rank-item-"+t},[Ee,h("span",Ue,B((null==(a=e.userInfo)?void 0:a.nickname)??""),1),h("span",Ne,[(g(!0),k(I,null,L(e.gameScore+"",((e,t)=>(g(),k("i",{key:"topbar-score-"+t,class:j(`num-rank-${e}`)},null,2)))),128)),Ke])],2)})),128))])])],4)):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>[["success","fail"].includes(nt.value)?(g(),k("div",Fe,[h("div",Oe,[h("span",{class:j(["game-over-title",`icon-${nt.value}-title`])},[Tt.value?w("",!0):(g(),k("span",Me,"本次得分为："+B(It.value),1))],2),h("span",{class:j(["game-over-role",`icon-${nt.value}-role`])},null,2),h("span",{class:"btn-back",onClick:t[16]||(t[16]=e=>Pt(1))})])])):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>["pause"===nt.value?(g(),k("div",Ve,[h("div",qe,[h("span",{class:"btn-pause-home",onClick:t[17]||(t[17]=e=>Pt(1))}),h("span",{class:"btn-pause-continue",onClick:t[18]||(t[18]=e=>Pt(3))})])])):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>[-1!==nt.value.indexOf("game-tips")?(g(),k("div",{key:0,onClick:t[19]||(t[19]=T((e=>Dt(1!==gt.value||Tt.value?"":"game-tips-1"===nt.value?"game-tips-guide-1":"game-tips-guide-1"===nt.value?"game-tips-guide-2":"")),["stop"]))},[-1!==nt.value.indexOf("guide")?(g(),k(I,{key:0},["game-tips-guide-1"===nt.value?(g(),k("div",Ae)):w("",!0),"game-tips-guide-2"===nt.value?(g(),k("div",Je)):w("",!0)],64)):(g(),k("div",De,[h("span",He,"第"+B(gt.value)+"关",1),Tt.value?(g(),k("span",{key:1,class:j(["game-tips-title-icon","icon-t-5"])})):(g(),k("span",{key:0,class:j(["game-tips-title-icon",`icon-t-${z(pt).skin[gt.value-1]}`])},null,2)),Tt.value?(g(),k("div",Ge,[R(" 本关时间60秒 "),We,R(" 需要收集5同伴 ")])):(g(),k("div",Pe,[R(" 本关时间"+B(z(pt).levelTime[gt.value-1])+"秒， ",1),Qe,R(" 需要收集"+B(z(pt).levetTips[gt.value-1][0])+"个碎片和"+B(z(pt).levetTips[gt.value-1][1])+"同伴 ",1)]))]))])):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>[xt.value?(g(),k("div",{key:0,onClick:t[20]||(t[20]=e=>xt.value=!1)},Xe)):w("",!0)])),_:1}),b(C,{name:"fade"},{default:$((()=>["address"===nt.value?(g(),k("div",Ye,[h("div",Ze,[S(h("input",{class:"address-name","onUpdate:modelValue":t[21]||(t[21]=e=>Kt.value.name=e),autocomplete:"off",name:"name"},null,512),[[E,Kt.value.name]]),S(h("input",{class:"address-phone","onUpdate:modelValue":t[22]||(t[22]=e=>Kt.value.phone=e),autocomplete:"off",name:"phone"},null,512),[[E,Kt.value.phone]]),S(h("input",{class:"address-address","onUpdate:modelValue":t[23]||(t[23]=e=>Kt.value.address=e),autocomplete:"off",name:"address"},null,512),[[E,Kt.value.address]]),h("span",{class:"btn-address-ok",onClick:t[24]||(t[24]=T((e=>(()=>{let{phone:e,name:t,address:a}=Kt.value,l={};if(t&&e&&a&&!Rt.value)if(11==e.length){if(Bt.value)return;Bt.value=!0,D("提交中..."),K({activityKey:U,periodNum:M,ownerUnionid:V,address:a,name:t,phone:e,extra:l}).then((()=>{Zt("提交成功"),nt.value="",Rt.value=!0})).finally((()=>{Bt.value=!1,H()}))}else Zt("请填写11位手机号码");else Zt("请输入正确的信息")})()),["stop"]))}),h("span",{class:"btn-close",onClick:t[25]||(t[25]=T((e=>nt.value=""),["stop"]))})])])):w("",!0)])),_:1})],512),[[_,nt.value||xt.value]])]),Nt.audioList.length?(g(),k(I,{key:0},[h("div",{class:j(["btn-music",[{active:Nt.volume},{bottom:"game"==rt.value}]]),onClick:t[26]||(t[26]=e=>Wt("bgm",!0))},null,2),S(h("div",et,[(g(!0),k(I,null,L(Nt.audioList,(e=>(g(),k("audio",{id:"audio-item-"+e.name,key:"audio-item-"+e.name,src:e.src,loop:e.loop??!1},null,8,tt)))),128))],512),[[_,!1]])],64)):w("",!0),at],64))}}),[["__scopeId","data-v-2a0589fb"]]);export{lt as default};
