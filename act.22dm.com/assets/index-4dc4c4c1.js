import{_ as e,d as a,u as l,Y as n,r as i,g as s,b as o,e as t,f as c,h as u,p as d,o as m,c as r,j as v,n as p,z as h,l as y,w as g,t as f,F as b,m as x,x as k,y as w,T,q as S,v as N,H as I,D as C,N as q,O as B,P as _,B as P,J as $}from"./index-cfeae59d.js";import{l as U}from"./lottie-5044be2c.js";import{w as F}from"./wxjssdk-753d301d.js";import{a as K}from"./utils-6f5a9f89.js";import{g as E}from"./sign-54d406fa.js";const H=(e,a)=>{let l=1;const n=Math.random();return n<a.randomBall[0]?l=1:n<a.randomBall[1]?l=4:n<a.randomBall[2]?l=5:n<a.randomBall[3]?l=2:n<=a.randomBall[4]&&(l=3),l},L=(e=[],a=!1,l,n=1)=>{const i={p:0,ep:-1,x:0,y:0,w:55,h:55,id:H(0,l),s:0,o:1,d:0};if(a)return i;if(e.length){const a=e[e.length-1];1===n?!a.s&&a.x>55&&e.push(i):2===n&&!a.s&&a.y>27.5&&e.push(i)}else e.push(i)},z=(e,a=[],l,n,i)=>{let s=0,o=-1,t=[];if(e&&l){const c=e.getBoundingClientRect(),u=l.getBoundingClientRect(),{x:d,y:m,width:r,height:v}=c;if(d<=0||d>=window.innerWidth)s=1;else if(m<=0||m>=window.innerHeight)s=2;else for(let e=0;e<a.length;e++){let{x:l,y:c,w:p,h:h,p:y,id:g}=a[e];const f=l+u.left+p/2,b=c+u.top+h/2,x=Math.abs(f-(d+r/2)),k=Math.abs(b-(m+v/2));if(Math.sqrt(x*x+k*k)<r/2+10){if(s=3,o=e,6===n.id){for(let a=e;a>=0;a--)t.length<8&&t.push(a);if(t.length<8&&e+1<a.length)for(let l=e+1;l<a.length;l++)t.length<8&&t.push(l)}else n.id===g?t=j(a,o):o-1>=0&&n.id===a[o-1].id?t=j(a,o-1):o+1<=a.length-1&&n.id===a[o+1].id&&(t=j(a,o+1));if((null==t?void 0:t.length)>=2||6===n.id)s=4;else{const l=L(a,!0,i);l.id=n.id,l.o=0,l.p=y,a.splice(e+1,0,l)}break}}}return{flyBallStatus:s,stopIndex:o,connectedArr:t}},D=(e=[],a)=>{let l=!1,n=-1,i=[];if(-1!==a){e.map((e=>{e.s=1}));let l=-1;l=0===a?e[0].p+55:e[a-1].p,e[a].ep=l;for(let n=a;n>=0;n--)e[n].s=0}else for(let s=0;s<e.length;s++){const a=e[s];if(-1!==a.ep&&(-1!==a.d&&a.p>=a.ep||-1===a.d&&a.p<=a.ep)){a.ep=-1,a.d=0,l=!0,n=s;break}}return l&&(e.map(((a,l)=>{e.some((e=>-1!==e.ep)),a.s=0,a.o=1})),n+1<e.length-1&&e[n].id===e[n+1].id&&(i=j(e,n))),{moveEnd:l,connectedArr:i}},j=(e,a)=>{try{const l=e[a].id,n=[a];for(let i=a-1;i>=0&&e[i].id===l;i--)n.unshift(i);for(let i=a+1;i<e.length&&e[i].id===l;i++)n.push(i);return n}catch(l){}},Q=(e,a)=>e.filter(((e,l)=>!a.includes(l))),M=e=>(B("data-v-289dc953"),e=e(),_(),e),R={id:"page-0109-ball"},V=[P('<div class="mm-role" data-v-289dc953><span class="icon-role-1" data-v-289dc953></span><span class="icon-role-2" data-v-289dc953></span><span class="icon-role-3" data-v-289dc953></span><span class="icon-role-4" data-v-289dc953></span></div><span class="icon-title" data-v-289dc953></span>',2)],G=M((()=>v("span",{class:"icon-logo"},null,-1))),A=M((()=>v("span",{class:"icon-logo2"},null,-1))),J={class:"mm-btn"},W={class:"game-top-info"},O=M((()=>v("i",{class:p("num-p")},null,-1))),X={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"-0.347 -710.056 771 714.6"},Z=[M((()=>v("path",{d:"M-.247 4.406 240.361 3.857Q336.124-1.737 354.407-29.416 373.634-53.587 383.593-105.614 384.34-119.062 385.834-248.312V-561.351C394.8-766.06 769.849-751.118 770.596-566.581V1.223",stroke:"#FF0000","stroke-width":"0.1",fill:"none"},null,-1)))],Y=M((()=>v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-22.5 -55 690 1050"},[v("path",{d:"M20.4568.0728V895.315C28.854 1012.15 175.782 1008.609 177.552 893.545V346.546Q174.012 254.495 246.591 250.954H554.61Q636.04 254.495 634.27 332.387V957.273",stroke:"#FF0000","stroke-width":"10",fill:"none"})],-1))),ee=["width","height"],ae=M((()=>v("span",{class:"icon-shoot-line"},null,-1))),le=M((()=>v("span",{id:"fly-ball-check"},null,-1))),ne={id:"page-dialogs"},ie={class:"rank-list"},se={class:"rank-username"},oe={class:"rank-score"},te=M((()=>v("span",{class:"icon-rank-line"},null,-1))),ce=[M((()=>v("div",{class:"bg-empty"},null,-1)))],ue={class:"gameover-score"},de={class:"gameover-score"},me={id:"audio-list"},re=["id","src","loop"],ve=e(a({__name:"index",setup(e){var a,B;let _,P,j,M,ve="https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/0109-ball/image",pe=new F({});const he=l(),ye=n();let ge="",fe="",be={nextBallShoeDelayTime:600,gameSpeed:[0,9,7],ballSpeed:1,ballSpeedIn:3,everyBallScore:5,everyDeadBallSkill:12,successScore:600,successGetScore:50,failGetScore:25,bombEffectTime:300,randomBall:[.3,.6,.8,.9,1],whiteList:["ofN_u6nBbWm3k8KmgyWetjEKIGaE"],randomLine:[0,.3,1]};const xe=(null==(a=he.params)?void 0:a.userInfo)??{};j=(null==xe?void 0:xe.unionid)??"";const ke=i(!1),we=i("mm"),Te=i(s(1600)),Se=i(s(1600)),Ne=i(s(1400)),Ie=i(""),Ce=i([]),qe=i([]),Be=i(0),_e=i(0),Pe=i(180),$e=i(!1),Ue=i(1),Fe=i(null),Ke=i(1),Ee=i((null==(B=null==he?void 0:he.query)?void 0:B.skinId)??""),He=i({id:0,angle:0}),Le=o({volume:!1,audioList:[{name:"bgm",src:`${ve}/audio/bgm.mp3`,loop:!0},{name:"shoot",src:`${ve}/audio/shoot.mp3`,loop:!1},{name:"skill",src:`${ve}/audio/skill.mp3`,loop:!1},{name:"bomb",src:`${ve}/audio/bomb.mp3`,loop:!1}]});let ze=null,De=null,je=null,Qe=null,Me=null,Re=null,Ve=null,Ge=null,Ae=[],Je=[new Image,new Image,new Image,new Image,new Image,new Image,new Image,new Image],We=0,Oe=!0,Xe=0,Ze=null;const Ye=(e=!0)=>{Ve&&clearInterval(Ve),Ge&&Ge.clearRect(0,0,837,802),Ae=[],ze=null,je=null,Me=null,Qe=null,He.value.id=0,Pe.value=180,Xe=0,e&&(Be.value=0,$e.value=!1)},ea=t((()=>1===Ke.value?{width:950,height:802}:2===Ke.value?{width:950,height:1017}:void 0)),aa=t((()=>{var e;let a=K(Ce.value);return(null==(e=null==be?void 0:be.whiteList)?void 0:e.includes(j))&&(a=99),a})),la=t((()=>{var e;return!!(null==(e=He.value)?void 0:e.id)})),na=e=>{const{centerX:a=null,centerY:l=null}=De;if(a&&l&&!Ie.value&&"game"===we.value){const n=e.touches[0],i=n.clientX,s=n.clientY;let o=Math.atan2(s-l,i-a)*(180/Math.PI)-90;Pe.value=o}},ia=()=>{la.value||$e.value||ke.value||Ie.value||Ae.some((e=>-1===e.d))||(He.value.id=Ue.value,He.value.angle=Pe.value,Ue.value=0,I((()=>{Qe=document.getElementById("fly-ball-check")})),setTimeout((()=>{let e=H(0,be);Xe>=be.everyDeadBallSkill&&(e=6,Xe=0),Ue.value=e}),be.nextBallShoeDelayTime),ra("shoot"))},sa=(e=null,a=0)=>{if(e&&a){Ze&&clearTimeout(Ze);const{x:l,y:n,width:i,height:s}=e;Fe.value={id:6===a&&"2"===Ee.value?7:a,x:l+i/2-(6===a?200:72),y:n+s/2-(6===a?176.5:72.5)},Ze=setTimeout((()=>{Fe.value=null}),be.bombEffectTime),ra(6===a?"skill":"bomb")}},oa=()=>{$e.value=!0;let e=be.failGetScore;const a=Be.value,l=(new Date).getTime()-We;Be.value>=be.successScore?(ca("dialogs","success"),e=be.successGetScore):ca("dialogs","fail"),ua({type:"game-play-0109-ball",getScore:e,gameScore:a,playTime:l}),$({ownerUnionid:j,activityKey:_,gameScore:a,levelNum:0,playTime:l,k:ge,s:E({k:ge,unionid:j,score:a,level:0})}),Ye(!1)},ta=()=>{if(aa.value>0){const a=Math.random();let l=1;try{for(let e=0;e<be.randomLine.length;e++)if(a<=be.randomLine[e]){l=e;break}}catch(e){l=1}Ke.value=l,I((()=>{ma(),ze=document.getElementById("game-shoot"),je=document.getElementById("canvas"),Me=document.querySelector("path"),De=ze.getBoundingClientRect(),De.centerX=De.left+De.width/2,De.centerY=De.top+De.height/2,Ge=je.getContext("2d");const e=new Path2D(Me.getAttribute("d"));Ge.stroke(e),Re=Me.getTotalLength(),L(Ae,!1,be,Ke.value),Ve&&clearInterval(Ve),Ve=setInterval((()=>{(()=>{var e;if(!ke.value){Ge.clearRect(0,0,ea.value.width,ea.value.height);for(let a=0;a<Ae.length;a++){const{id:l,p:n,w:i,h:s,s:o,x:t,y:c,o:u}=Ae[a];if(n>Re)return void oa();if(o)u&&Ge.drawImage(Je[6===l&&"2"===Ee.value?7:l],t,c,i,s);else{const{x:e,y:o}=Me.getPointAtLength(n);let t=e,c=o+ea.value.height-s-18;2===Ke.value&&(t=e-10,c=o-s/2),Ge.drawImage(Je[6===l&&"2"===Ee.value?7:l],t,c,i,s),Ae[a].x=t,Ae[a].y=c,Ae.some((e=>-1===e.d))?Ae[a].p-=be.ballSpeedIn:Ae.some((e=>-1!==e.ep))?Ae[a].p+=be.ballSpeedIn:Ae[a].p+=be.ballSpeed}let{flyBallStatus:d,stopIndex:m,connectedArr:r}=z(Qe,Ae,je,He.value,be);const v=(null==(e=He.value)?void 0:e.id)??0;let p=null;d&&(p=Qe.getBoundingClientRect(),Qe=null,He.value.id=0);let h=!1;if(4===d&&(r.length>=2||6===v))h=!0,Be.value+=(r.length+1)*be.everyBallScore,6!==v&&(Xe+=r.length+1);else if(3===d||Ae.some((e=>-1!==e.ep))){const{moveEnd:e,connectedArr:a}=D(Ae,m);e&&a.length>=3&&(h=!0,Be.value+=a.length*be.everyBallScore,Xe+=a.length,Ae[Math.min(...a)]),r=a}if(h){const e=Math.min(...r),a=Math.max(...r);if(e<=Ae.length-1){const l=JSON.parse(JSON.stringify(Ae[a]));Ae=Q(Ae,r),Ae.map(((a,l)=>{a.s=1,l<=e-1&&(a.s=0)})),e-1<Ae.length-1&&(e<=0?Ae.map(((e,a)=>{e.s=0})):(Ae[e-1].ep=l.p,Ae[e-1].d=-1))}sa(p,v),0===Ae.length&&L(Ae,!1,be,Ke.value);break}L(Ae,!1,be,Ke.value)}}})()}),be.gameSpeed[Ke.value]),We=(new Date).getTime(),ua({type:"game-play",activityKey:_})}))}else we.value="mm",Ie.value="empty"},ca=(e="",a="")=>{"scene"===e?(Ye(),Ie.value="","game"===a?aa.value>0?(we.value=a,Oe?Ie.value="rule-guide":ta()):Ie.value="empty":(we.value=a,da())):"dialogs"===e?(Ie.value=a,["rule-guide","rule-skill"].includes(a)&&(ke.value=!0)):"action"===e&&("back"===a?ye.go(-1):"rule-guide"===a?(Ie.value="",ke.value=!1,Oe&&(Oe=!1,ta())):"rule-skill"===a?(Ie.value="",ke.value=!1):"music"===a&&ra("bgm",!0))},ua=(e={})=>{let a=E({k:fe,unionid:j,score:0,level:0});const l=(new Date).getTime();Ce.value.push({addTime:l,extra:{...e}}),$({ownerUnionid:j,activityKey:M,gameScore:0,levelNum:0,playTime:l,extra:e,k:fe,s:a})},da=()=>{C({activityKey:M,periodNum:P,ownerUnionid:j}).then((({code:e,data:a})=>{0===e&&(Ce.value=a)})),qe.value=[{ownerUnionid:"ofN_u6tnnzyfmHDQaFXQPxUagupI",playTime:"22058739",levelNum:0,gameScore:133335,userInfo:{country:"",unionid:"ofN_u6tnnzyfmHDQaFXQPxUagupI",province:"",city:"",openid:"oTaiPuK9RpVcPcTrrrg09fQjSVZE",sex:0,nickname:"财源滚滚",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIibu88N0w4b1PvmA6AKzRXg2bacEGAL0vPZcGfpibN7GFQ5wwaqlyKVYCFyJqpicNKQW33R6a1PAKpBMlUFTiamJ3icicOu9Ulb8cnsibeDyPdqfS2w/132"},addTime:"2025-01-26 00:19:17"},{ownerUnionid:"ofN_u6q04kqTRqVfx3m0L4FvKX4w",playTime:"17407447",levelNum:0,gameScore:126525,userInfo:{country:"",unionid:"ofN_u6q04kqTRqVfx3m0L4FvKX4w",province:"",city:"",openid:"oTaiPuPWBYxhM7u5y96tz5S5QQvQ",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/18th-h5/head/5.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/8f166f8c-6c9c-44c6-a92a-538d556706a5.png",ixyyName:"路人羊",headList:[0,5]},nickname:"淮",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELx0nTKdyLHsPVIAvxQmlfetgxqhic0RyeuEBAXCZibzTSibrxzSXr2BreNFUv8vIgFvp4pMrL4uGffFFlnzo6v4EP3W6piaYdNoOu7hib7pk82Qjg/132"},addTime:"2025-01-22 06:24:28"},{ownerUnionid:"ofN_u6qgeOvFlwU4vFf04QbHVrHg",playTime:"14437667",levelNum:0,gameScore:114515,userInfo:{country:"",unionid:"ofN_u6qgeOvFlwU4vFf04QbHVrHg",province:"",city:"",openid:"oTaiPuCOEZhh340kl2e0CaDj5T84",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/b25679fe-0f66-40c3-97d6-75b7e8fdb37b.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/fa16fd5a-5a72-4116-abdc-2671ca060ba8.png",ixyyName:"小狼兵",headList:[]},nickname:"ʚɞ",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIicb8KKWPia5wYmQBVgPDdZg3F1x2HUDoPibps6XelcibeM1Ie1e9Vw10j2NCMMp9ThO8r6PkGbCx81ObJYuibb5fdJn4hEQovI6peRvtwZHZjnQA/132"},addTime:"2025-01-26 13:08:34"},{ownerUnionid:"ofN_u6nF5qxvWFHv2aq8f3suTkh0",playTime:"14719661",levelNum:0,gameScore:114510,userInfo:{country:"",unionid:"ofN_u6nF5qxvWFHv2aq8f3suTkh0",province:"",city:"",openid:"oTaiPuG4MUvRoOPmKagV_Ej3eavU",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/18th-h5/head/0-2.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/fa16fd5a-5a72-4116-abdc-2671ca060ba8.png",ixyyName:"小狼兵",headList:[]},nickname:"hhh",headimgurl:""},addTime:"2025-01-25 21:51:42"},{ownerUnionid:"ofN_u6l0bji36waPKdS25ZilOaCI",playTime:"16111454",levelNum:0,gameScore:109110,userInfo:{country:"",unionid:"ofN_u6l0bji36waPKdS25ZilOaCI",province:"",city:"",openid:"oTaiPuHFX0Fnwx506ve3JCEwhUV8",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/a0e8b3c2-3483-4203-818f-cefe4e140f4e.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/8f166f8c-6c9c-44c6-a92a-538d556706a5.png",ixyyName:"路人羊"},nickname:"气",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEI3tTy6icGlLUbpx1MdmQHj80J86GRnINqE9HF4ibD0Jib52IEnevTQKCn5VicZlyEBfDJJN8hTfyWtzfBYFjT1pgDUicfyGkT8RaeuoR2dBoicTTOQ/132"},addTime:"2025-01-21 01:21:04"},{ownerUnionid:"ofN_u6m3W_4ZVM2912hFNa_dqZDw",playTime:"47416308",levelNum:0,gameScore:101465,userInfo:{country:"",unionid:"ofN_u6m3W_4ZVM2912hFNa_dqZDw",province:"",city:"",openid:"oTaiPuC4ySb-fQD4KSLdkvDmefHE",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/a0e8b3c2-3483-4203-818f-cefe4e140f4e.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/8f166f8c-6c9c-44c6-a92a-538d556706a5.png",ixyyName:"路人羊",headList:[5]},nickname:"拾光",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/Uvl3K4ibjWMyPibjK1ltiaJjntKGTRrWsA1ZibOrDIibBD91VNE1Cs6WKmQC9OUDoJjrHZXWEYo89M5BXPJxCw0xq5YvanYlicOLYS5ic02LFdnyGE/132"},addTime:"2025-01-15 01:26:33"},{ownerUnionid:"ofN_u6jIpbQaAlN0FwSQcBAgi6-I",playTime:"15521285",levelNum:0,gameScore:70245,userInfo:{country:"",unionid:"ofN_u6jIpbQaAlN0FwSQcBAgi6-I",province:"",city:"",openid:"oTaiPuJiihVYNlWUKIDFSkBB7fWI",sex:0,nickname:"清风不识初见月",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEIPNrJCrUToyj8DcIRHJ1pakKeVSSCpVlDt7iabgPx5Rk2TT11qRn6wInogTHHWkr42rvf3demlnq5R43C4RK1ymjj1EkcF0Bib9A7n8yUpg5ag/132"},addTime:"2025-01-13 21:33:15"},{ownerUnionid:"ofN_u6v2-uch2Le7IqCmMH8emSq0",playTime:"8123278",levelNum:0,gameScore:64545,userInfo:{country:"",unionid:"ofN_u6v2-uch2Le7IqCmMH8emSq0",province:"",city:"",openid:"oTaiPuGhx0ZaM01fX5UgWTGbN96E",sex:0,nickname:"Mercury",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/347Vv906hhE6m7YOSNPnAe58oyXnYvJg1ic4JOEGKTCLYAxO7AB6Pdk9iadVsyibm3vmKxFVswV2FH4X1cqcV4r4bcrh066accZmDgCPSpBUpM/132"},addTime:"2025-01-21 15:15:50"},{ownerUnionid:"ofN_u6kGJeYf0DqG7wtCLXSRzGOs",playTime:"11835483",levelNum:0,gameScore:61215,userInfo:{country:"",unionid:"ofN_u6kGJeYf0DqG7wtCLXSRzGOs",province:"",city:"",openid:"oTaiPuGKEGZK8rfz3pyNsxQ14IUQ",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/18th-h5/head/3.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/8f166f8c-6c9c-44c6-a92a-538d556706a5.png",ixyyName:"路人羊",headList:[7,8,1,3,2]},nickname:"阿白",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6Eum7hXU2Tl0uRUicnib3hbUiaCv5WKLTvbofWvNeHgfculBPicKX4IpWTMcptricf9OW1Fzc0DItGXwg/132"},addTime:"2025-01-11 23:09:39"},{ownerUnionid:"ofN_u6koqAL0ZJyfHkvcSAD2Txuc",playTime:"8723288",levelNum:0,gameScore:52290,userInfo:{country:"",unionid:"ofN_u6koqAL0ZJyfHkvcSAD2Txuc",province:"",city:"",openid:"oTaiPuLgAlJbboQRjWU9p8Vw1moU",sex:0,extra:{ixyyHead:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/18th-h5/head/0-2.png",ixyyCard:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/ixyy/my/fa16fd5a-5a72-4116-abdc-2671ca060ba8.png",ixyyName:"小狼兵",headList:[]},nickname:"y.",headimgurl:"https://thirdwx.qlogo.cn/mmopen/vi_32/ObfZ1wDSJ4bsLu5hVHVU8miazUJzxnz1MLo4jiaylGdRvlbKQT2ibAf4Y7Jpia3clSPuGg5eeQ7BHypPLhX06snnNFVtqdzzK01ecubz4f2wEMw/132"},addTime:"2025-01-25 14:50:29"}]},ma=async()=>{const e=document.getElementById("lottie");if(e){U.loadAnimation({container:e,renderer:"canvas",loop:!0,autoplay:!1,path:`${ve}/tutu.json`}).play()}},ra=(e,a=!1)=>{q(Le,e,a)};return c((()=>{var e,a,l;_=(null==(e=he.meta)?void 0:e.activityKey)??"0109-ball",M=(null==(a=he.meta)?void 0:a.activityKey0109)??"0109",P=(null==(l=he.meta)?void 0:l.periodNum)??1;for(let n=1;n<=7;n++)Je[n].src=`${ve}/icon/ball-${n}.png`;u({activityKey:_,periodNum:P}).then((({code:e,data:a})=>{0===e&&(ge=a.k,be=a.extra??{},da(),u({activityKey:M,periodNum:P}).then((({code:e,data:a})=>{0===e&&(fe=a.k)})))})),pe.ready((()=>{var e,a,l;ra("bgm",!0),pe.updateShareData({title:(null==(e=he.meta)?void 0:e.title)??"",desc:(null==(a=he.meta)?void 0:a.desc)??"",link:location.origin+he.path,imgUrl:(null==(l=he.meta)?void 0:l.imgUrl)??""}),document.addEventListener("visibilitychange",(e=>{document.hidden?d():Le.volume&&ra("bgm",!0)}))}))})),(e,a)=>(m(),r(b,null,[v("div",R,["mm"===we.value?(m(),r("div",{key:0,id:"page-mm",class:p(["page-layer",`bg-mm${Ee.value}`])},[v("div",{class:"mm-main",style:h(`transform:scale(${Te.value})`)},V,4),G,A,v("div",J,[v("span",{class:p(`btn-start${Ee.value}`),onClick:a[0]||(a[0]=e=>ca("scene","game"))},null,2),v("span",{class:p(`btn-rank${Ee.value}`),onClick:a[1]||(a[1]=e=>ca("dialogs","rank"))},null,2),v("span",{class:p(`btn-rule${Ee.value}`),onClick:a[2]||(a[2]=e=>ca("dialogs","rule"))},null,2),v("span",{class:p(["btn-music",[Le.volume?`btn-music${Ee.value}-0`:`btn-music${Ee.value}-1`]]),onClick:a[3]||(a[3]=e=>ca("action","music"))},null,2),v("span",{class:p(`btn-back${Ee.value}`),onClick:a[4]||(a[4]=e=>ca("action","back"))},null,2)])],2)):y("",!0),"game"===we.value?(m(),r("div",{key:1,id:"page-game",class:p(["page-layer",`bg-game${Ee.value}`]),onTouchmove:na,onTouchend:ia},[v("div",{class:p(["game-top",`bg-game-top${Ee.value}`]),style:h(`top:${1===Te.value?0:-100/Te.value+"px"}`)},[v("div",{id:"lottie",style:h(`transform:scale(${.9*Te.value})`)},null,4),v("span",{class:p(`icon-ball-skill${Ee.value}`),onClick:a[5]||(a[5]=g((e=>ca("dialogs","rule-skill")),["stop"]))},[v("i",null,f(_e.value?"x"+_e.value:""),1)],2)],6),v("div",W,[v("div",{class:p(`icon-topbar-hp-2${Ee.value}`)},[(m(!0),r(b,null,x(aa.value+"",(e=>(m(),r("i",{class:p(`num-${e}`)},null,2)))),256))],2),v("div",{class:p(`icon-topbar-score-2${Ee.value}`)},[(m(!0),r(b,null,x(Be.value+"",(e=>(m(),r("i",{class:p(`num-${e}`)},null,2)))),256)),O,(m(),r(b,null,x("600",(e=>v("i",{class:p(`num-${e}`)},null,2))),64))],2)]),v("div",{class:p(["game-main",[`line-${Ke.value}`,`skin-${Ee.value}`]]),style:h(`transform:scale(${Ne.value})`)},[v("div",{id:"game-line-box",class:p(`icon-line-${Ke.value}`)},[1===Ke.value?(m(),r("svg",X,Z)):y("",!0),Y,v("canvas",{id:"canvas",width:ea.value.width,height:ea.value.height},null,8,ee)],2),v("div",{id:"game-shoot",class:"game-shoot-box",style:h(`transform: rotate(${Pe.value}deg)`)},[v("div",{class:p(`icon-shoot${Ee.value}`)},[k(T,{name:"fade"},{default:w((()=>[Ue.value?(m(),r("span",{key:0,class:p(`icon-ball-${"2"===Ee.value&&6===Ue.value?7:Ue.value}`)},null,2)):y("",!0)])),_:1}),ae],2)],4),k(T,{name:"fade-fast"},{default:w((()=>{var e,a;return[(null==(e=He.value)?void 0:e.id)?(m(),r("div",{key:0,class:"game-shoot-box fly",style:h(`transform: rotate(${He.value.angle}deg)`)},[v("span",{id:"fly-ball",class:p([`icon-ball-${null==(a=He.value)?void 0:a.id}`])},null,2),le],4)):y("",!0)]})),_:1})],6),k(T,{name:"fade"},{default:w((()=>[Fe.value?(m(),r("span",{key:0,class:p(["bomb-effect",`icon-ball-${Fe.value.id}-1`]),style:h({top:Fe.value.y+"px",left:Fe.value.x+"px"})},null,6)):y("",!0)])),_:1}),v("span",{class:p(`btn-back${Ee.value}`),onClick:a[6]||(a[6]=e=>ca("scene","mm"))},null,2),v("span",{class:p(`btn-rule-guide${Ee.value}`),onClick:a[7]||(a[7]=e=>ca("dialogs","rule-guide"))},null,2)],34)):y("",!0),S(v("div",ne,[v("div",{class:"page-layer",style:h(`transform:scale(${Se.value})`)},[k(T,{name:"fade"},{default:w((()=>["rank"===Ie.value?(m(),r("div",{key:0,class:"dialogs-rank",onClick:a[8]||(a[8]=g((e=>Ie.value=""),["stop"]))},[v("div",{class:p(`bg-rank${Ee.value}`)},[v("div",ie,[(m(!0),r(b,null,x(qe.value,((e,a)=>{var l;return m(),r("div",{class:"rank-item",key:`rank-item-${a}`},[v("span",{class:p(["rank-icon",`icon-rank-${a<=2?a+1:4}`])},null,2),v("span",se,f((null==(l=e.userInfo)?void 0:l.nickname)??""),1),v("span",oe,f(e.gameScore??"")+"分",1),te])})),128))])],2)])):y("",!0)])),_:1}),k(T,{name:"fade"},{default:w((()=>["rule"===Ie.value?(m(),r("div",{key:0,class:"dialogs-rule",onClick:a[9]||(a[9]=g((e=>Ie.value=""),["stop"]))},[v("div",{class:p(`bg-rule${Ee.value}`)},null,2)])):y("",!0)])),_:1}),k(T,{name:"fade"},{default:w((()=>["empty"===Ie.value?(m(),r("div",{key:0,class:"dialogs-empty",onClick:a[10]||(a[10]=g((e=>Ie.value=""),["stop"]))},ce)):y("",!0)])),_:1}),k(T,{name:"fade"},{default:w((()=>["rule-guide"===Ie.value?(m(),r("div",{key:0,class:"dialogs-rule",onClick:a[11]||(a[11]=g((e=>ca("action","rule-guide")),["stop"]))},[v("div",{class:p(`bg-rule-guide${Ee.value}`)},null,2)])):y("",!0)])),_:1}),k(T,{name:"fade"},{default:w((()=>["rule-skill"===Ie.value?(m(),r("div",{key:0,class:"dialogs-rule",onClick:a[12]||(a[12]=g((e=>ca("action","rule-skill")),["stop"]))},[v("div",{class:p(`bg-rule-skill${Ee.value}`)},null,2)])):y("",!0)])),_:1}),k(T,{name:"fade"},{default:w((()=>["success"===Ie.value?(m(),r("div",{key:0,class:"dialogs-success",onClick:a[13]||(a[13]=g((e=>ca("scene","mm")),["stop"]))},[v("div",{class:p(`bg-success${Ee.value}`)},[v("span",ue,f(Be.value),1)],2)])):y("",!0)])),_:1}),k(T,{name:"fade"},{default:w((()=>["fail"===Ie.value?(m(),r("div",{key:0,class:"dialogs-fail",onClick:a[14]||(a[14]=g((e=>ca("scene","mm")),["stop"]))},[v("div",{class:p(`bg-fail${Ee.value}`)},[v("span",de,f(Be.value),1)],2)])):y("",!0)])),_:1})],4)],512),[[N,Ie.value]])]),S(v("div",me,[(m(!0),r(b,null,x(Le.audioList,(e=>(m(),r("audio",{id:"audio-item-"+e.name,key:"audio-item-"+e.name,src:e.src,loop:e.loop??!1},null,8,re)))),128))],512),[[N,!1]])],64))}}),[["__scopeId","data-v-289dc953"]]);export{ve as default};
