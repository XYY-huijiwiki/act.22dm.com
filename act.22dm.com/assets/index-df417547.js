import{ah as e,_ as o,d as i,o as s,c as a,j as l,F as t,s as n,y as c,z as r,m as d,q as p,T as u,a0 as v,u as h,a as m,U as g,b as w,e as k,a4 as f,n as y,k as L,l as C,x as D,O as I,P as x}from"./index-07d41525.js";import{w as P}from"./wxjssdk-9390c5f7.js";let T,j;const _=i({name:"cicf",components:{},setup(o,i){var s,a;let l=new P({});v();const t=h(),n=m({userInfo:(null==(s=t.params)?void 0:s.userInfo)??{},loading:!1,dialogs:"",alert:"",k:"",list1:[[],[],[],[]],list2:[["1-1","1-2","1-3","1-4","1-5","1-6","1-7","1-8","1-9","1-10","1-11","1-12","1-13","1-14","1-15","1-16","1-17","1-18","1-19","1-20","1-21"],["2-1","2-2","2-3","2-4","2-5","2-6","2-7","2-8","2-9","2-10","2-11","2-12","2-13","2-14","2-15","2-16","2-17","2-18","2-19","2-20","2-21","2-22","2-23","2-24","2-25","2-26","2-27","2-28","2-29","2-30","2-31","2-32","2-33","2-34","2-35"],["3-1","3-2","3-3","3-4","3-5","3-6","3-7","3-8","3-9","3-10","3-11","3-12","3-13","3-14","3-15","3-16","3-17","3-18","3-19","3-20","3-21","3-22","3-23"],["4-1","4-2","4-3","4-4","4-5","4-6","4-7","4-8","4-9","4-10","4-11","4-12","4-13","4-14","4-15","4-16","4-17","4-18","4-19","4-20","4-21","4-22","4-23","4-24","4-25","4-26","4-27","4-28","4-29","4-30","4-31","4-32","4-33","4-34","4-35","4-36","4-37","4-38","4-39","4-40","4-41","4-42","4-43","4-44","4-45","4-46"]],photoDate:1,showMore:!1,previewType:1,previewList:[],previewIndex:0,loupe:!1,likeCount:0,currDate:1,recordList:[],likeToday:0,isMiniProgram:g()});j=(null==(a=n.userInfo)?void 0:a.unionid)??"";const c=w((()=>{var e;let o=[];return(null==(e=n.list2)?void 0:e.length)&&(o=n.list2[n.photoDate-1]),o})),r=(e=0,o=-1)=>{n.previewList=n.list2[-1==o?n.photoDate-1:o],n.previewIndex=e,n.previewType=2,setTimeout((()=>{n.dialogs="photo"}),0)},d=(e=null)=>{let o=(new Date).getDate();e&&(o=new Date(e).getDate());let i=1;switch(o){case 30:i=1;break;case 1:i=2;break;case 2:i=3;break;case 3:i=4}return i};return k((()=>{var e,o;T=(null==(e=t.meta)?void 0:e.activityKey)??"AnimeConvention";let i=location.origin+t.path,s=(null==(o=t.meta)?void 0:o.imgUrl)??"";l.ready((()=>{var e,o;l.updateShareData({title:(null==(e=t.meta)?void 0:e.title)??"",desc:(null==(o=t.meta)?void 0:o.desc)??"",link:i,imgUrl:s})}))})),{...f(n),onPreviewAreaPhoto:e=>{r(0,[2,1,0,3][e])},onPreviewGroupPhoto:r,photoList:c,onLike:()=>{n.alert="活动已结束"},isLike:e=>n.recordList.some((o=>o.otherId==e.id)),onLoupe:()=>{n.loupe=!0},onSelectDate:e=>{n.photoDate!=e&&(n.showMore=!1,n.photoDate=e)},getCurrDate:d,onGetRecordList:()=>{var o;(o={activityKey:T,unionid:j},e({url:"/cgame/records",method:"get",params:o})).then((({code:e,data:o})=>{0===e&&(n.recordList=o,o.forEach((e=>{d(e.addTime)==n.currDate&&n.likeToday++})))}))},onShowMore:()=>{n.showMore=!0,setTimeout((()=>{let e=null==document?void 0:document.getElementById("photo-list");e&&e.scrollTo(0,200)}),0)}}}}),M=e=>(I("data-v-55ef0e0f"),e=e(),x(),e),b={id:"page-cicf"},z={id:"page-main"},S={class:"icon-list"},A=["onClick"],G={class:"date-list"},U=["onClick"],$={id:"photo-list"},E=["onClick"],K=["src"],q=M((()=>l("div",{class:"icon-word-1-2"},null,-1))),B=M((()=>l("div",{class:"icon-word-2-2"},null,-1))),F={id:"page-dialogs"},O={class:"icon-alert"},R=M((()=>l("i",{class:y("icon-alert-title-2-2")},null,-1))),H={class:"photo-area"},J=["src"],N=M((()=>l("i",{class:"icon-photo-mask"},null,-1))),Q=["src"],V={class:"icon-tips"};const W=o(_,[["render",function(e,o,i,v,h,m){return s(),a("div",b,[l("div",z,[l("div",S,[(s(),a(t,null,n(4,((o,i)=>l("i",{key:"icon-"+o,class:y("icon-"+o),onClick:o=>e.onPreviewAreaPhoto(i)},null,10,A))),64))]),l("div",G,[(s(),a(t,null,n(4,((o,i)=>l("i",{key:"date-"+i,class:y(`type-${o}-${e.photoDate==o?"1":"0"}`),onClick:i=>e.onSelectDate(o)},null,10,U))),64))]),l("div",$,[(s(!0),a(t,null,n(e.photoList,((o,i)=>(s(),a("span",{onClick:o=>e.onPreviewGroupPhoto(i,-1),key:"photo-"+i},[l("img",{src:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/cicf/image/photoList/"+o+".jpg"},null,8,K)],8,E)))),128))]),q,B]),c(l("div",F,[d(u,{name:"fade"},{default:p((()=>["photo"==e.dialogs?(s(),a("div",{key:0,class:"dialogs-photo",onClick:o[4]||(o[4]=L((o=>e.dialogs=""),["self"]))},[l("div",O,[l("i",{class:"icon-close",onClick:o[0]||(o[0]=L((o=>e.dialogs=""),["self"]))}),R,l("i",{class:y(["icon-view",`type-${e.previewType}`]),onClick:o[1]||(o[1]=o=>e.onLoupe())},null,2),l("div",H,[l("span",null,[l("img",{src:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/cicf/image/photoList/"+e.previewList[e.previewIndex]+".jpg"},null,8,J)]),N]),c(l("i",{class:y("icon-next"),onClick:o[2]||(o[2]=o=>e.previewIndex++)},null,512),[[r,e.previewIndex!=e.previewList.length-1]]),c(l("i",{class:y("icon-prev"),onClick:o[3]||(o[3]=o=>e.previewIndex--)},null,512),[[r,0!=e.previewIndex]])])])):C("",!0)])),_:1}),d(u,{name:"fade"},{default:p((()=>[e.loupe?(s(),a("div",{key:0,class:"dialogs-loupe",onClick:o[5]||(o[5]=L((o=>e.loupe=!1),["self"]))},[l("img",{src:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/cicf/image/photoList/"+e.previewList[e.previewIndex]+".jpg"},null,8,Q)])):C("",!0)])),_:1}),d(u,{name:"fade"},{default:p((()=>[e.alert?(s(),a("div",{key:0,class:"dialogs-alert",onClick:o[6]||(o[6]=o=>e.alert="")},[l("div",V,[l("span",null,D(e.alert),1)])])):C("",!0)])),_:1})],512),[[r,e.dialogs||e.loupe||e.alert]])])}],["__scopeId","data-v-55ef0e0f"]]);export{W as default};
