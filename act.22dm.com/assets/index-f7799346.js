import{_ as e,d as s,o as a,c as n,x as l,y as c,T as i,j as t,n as r,l as o,q as d,v as u,F as p,m,Y as g,u as h,b as v,g as k,C as y,e as b,f as T,h as f,p as w,a1 as C,z as x,w as $,t as I,J as U,N as z,Q as M,O as G,P as S}from"./index-19ecc65e.js";import{w as _}from"./wxjssdk-9b84c5c1.js";import{g as j}from"./sign-54d406fa.js";let N,q,D;const L=s({name:"2023",components:{},setup(e,s){var a,n;const{proxy:l}=M();let c=new _({});g();const i=h(),t=v({k:"",imgUrl:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/2023/image2",userInfo:(null==(a=i.params)?void 0:a.userInfo)??{},visible:!0,volume:!1,shareData:null,scene:"mm",dialogs:"",tips:"",scale:k(1600),scale2:k(1200),audioList:[{name:"bgm",src:"https://cpe-app-oss.oss-cn-shenzhen.aliyuncs.com/h5/2023/bgm.mp3",loop:!0}],list:[{id:5,select:0,touch:0}],end:{showCreate:!1,wallpaperId:1,path1:1,path2:y(1e3,9999),path3:1,path4:1,path5:y(1,2),path6:y(1,2)}});D=(null==(n=t.userInfo)?void 0:n.unionid)??"";const r=b((()=>{var e;let s=null;return(null==(e=t.list)?void 0:e.length)&&(s=t.list[t.list.length-1]),s})),o=()=>{r.value.touch||(r.value.touch=1,r.value.select=Math.floor(9*Math.random())+1,setTimeout((()=>{r.value.touch=2,d()}),1250))},d=(e=!1)=>{let s=r.value.id,a=r.value.select;if(6!==s){if(5===s){if(1===r.value.touch)return;0===r.value.touch&&o()}if(a){let n,l;if(l=s+1,e){const e=[1,2,3,4,5,6],s=t.list.map((e=>e.id)),a=e.filter((e=>!new Set(s).has(e)));l=a[Math.floor(Math.random()*a.length)]}let c=0;4==l&&(c=1),6==l&&(c=a),n={id:l,select:c,touch:0},t.list.push(n),t.visible=!1,setTimeout((()=>{t.visible=!0}),0)}}else if(r.value.touch>=4){let e=t.list[4].select,s=t.list[3].select,a=t.list[2].select,n={showCreate:!1,wallpaperId:s,prizeId:e,path1:t.list[0].select,path2:y(1e3,9999),path3:a,path4:a,path5:y(1,2),path6:y(1,2)};t.end=n,t.dialogs="end";let{k:l}=t,c=j({k:l,unionid:D,score:0,level:0});U({ownerUnionid:D,activityKey:N,gameScore:0,levelNum:0,playTime:0,extra:n,k:l,s:c})}else e&&r.value.touch++},u=(e,s=!1)=>{z(t,e,s)},p=e=>{l.$Message.success(e)};return T((()=>{var e,s,a;N=(null==(e=i.meta)?void 0:e.activityKey)??"2023",q=(null==(s=i.meta)?void 0:s.periodNum)??1;let n=location.origin+i.path,l=(null==(a=i.meta)?void 0:a.imgUrl)??"";i.query.shareData&&(t.shareData=JSON.parse(decodeURIComponent(i.query.shareData))),f({activityKey:N,periodNum:q}).then((({code:e,data:s})=>{0===e&&(t.k=s.k)})),c.ready((()=>{var e,s;u("bgm",!0),c.updateShareData({title:(null==(e=i.meta)?void 0:e.title)??"",desc:(null==(s=i.meta)?void 0:s.desc)??"",link:n,imgUrl:l}),document.addEventListener("visibilitychange",(e=>{document.hidden?w():t.volume&&u("bgm",!0)}))}))})),{...C(t),currTarget:r,onPlayAudio:u,onGameStart:(e=null,s=null)=>{t.list=[{id:1,select:0}],t.scene="game",t.visible=!1,setTimeout((()=>{t.visible=!0}),0)},onGameSelectRandom:()=>{if(6===r.value.id)return;if(5===r.value.id)return void o();const e=Math.floor(Math.random()*[4,5,9,9,9,9][r.value.id-1])+1;r.value.select=e},onGameNext:d,onGameBack:()=>{t.list=[],t.scene="mm",t.dialogs="",t.tips=""},showMessage:p,onPrizeTouch:o,downloadImage:e=>{c.onSaveImage(e).then((e=>{p(e)})).catch((e=>{p(e)}))},onLook:()=>{location.href="https://mp.weixin.qq.com/s?__biz=MjM5MDAxMzI0MA==&mid=2649627188&idx=1&sn=a1c2930cd8b31d4b302d403ce9416dba&chksm=be51f8638926717504d8fa9d554a7b6e7f2a028a289219b0b47ac2bcd313ec96de9e7a388051#rd"}}}}),P=e=>(G("data-v-49cdf44e"),e=e(),S(),e),A={id:"page"},K={key:0,id:"scene-mm",class:"scene-layer bg-end"},R=P((()=>t("i",{class:"icon-reserved"},null,-1))),B={key:0,id:"scene-game",class:"scene-layer mask"},J={class:"game-title"},O=["onClick"],E=["onClick"],F=["onClick"],Q={class:"swiper-main"},Y={class:"swiper-mask"},H={class:"swiper-text"},V={key:0,class:"icon-prize-active"},W={class:"game-btn"},X=P((()=>t("span",{class:"icon icon-xi"},null,-1))),Z=P((()=>t("span",{class:"icon icon-mei"},null,-1))),ee=P((()=>t("span",{class:"icon icon-lan"},null,-1))),se=P((()=>t("span",{class:"icon icon-hui"},null,-1))),ae=P((()=>t("span",{class:"icon icon-xiao"},null,-1))),ne=P((()=>t("span",{class:"icon icon-chun"},null,-1))),le=P((()=>t("span",{class:"icon icon-hong"},null,-1))),ce=P((()=>t("span",{class:"icon icon-nuan"},null,-1))),ie=P((()=>t("span",{class:"icon icon-xi icon-xi2"},null,-1))),te=P((()=>t("span",{class:"icon icon-hui icon-hui2"},null,-1))),re=P((()=>t("span",{class:"icon icon-xi"},null,-1))),oe=P((()=>t("span",{class:"icon icon-lan"},null,-1))),de=P((()=>t("span",{class:"icon icon-nuan icon-nuan2"},null,-1))),ue=P((()=>t("span",{class:"icon icon-xi"},null,-1))),pe=P((()=>t("span",{class:"icon icon-mei"},null,-1))),me=P((()=>t("span",{class:"icon icon-lan"},null,-1))),ge=P((()=>t("span",{class:"icon icon-fei"},null,-1))),he=P((()=>t("span",{class:"icon icon-xi icon-xi2"},null,-1))),ve=P((()=>t("span",{class:"icon icon-hui icon-hui2"},null,-1))),ke={id:"page-dialogs",class:"scene-layer"},ye={key:0,class:"scene-layer"},be={class:"dialogs-end bg-end"},Te={class:"end-1 end-time-1"},fe={class:"end-name end-time-2"},we=P((()=>t("span",{class:"end-2 end-time-3"},null,-1))),Ce={class:"end-3 end-time-4"},xe=["src"],$e=["src"],Ie={class:"end-4 end-num end-time-7"},Ue={class:"end-time-8"},ze=["src"],Me=["src"],Ge={class:"end-5 end-time-10"},Se=["src"],_e=["src"],je=P((()=>t("span",{class:"end-6 end-time-13"},null,-1))),Ne={class:"end-7 end-time-14"},qe=["src"],De=["src"],Le=P((()=>t("i",{class:"icon-reserved"},null,-1))),Pe={class:"dialogs-create"},Ae={key:0,class:"create-img"},Ke=["src"],Re={class:"create-btn"},Be={key:0,class:"dialogs-tips"},Je=[P((()=>t("span",{class:"icon-share"},null,-1)))],Oe={key:1,class:"dialogs-back"},Ee={class:"icon-back2"},Fe={id:"audio-list"},Qe=["id","src","loop"];const Ye=e(L,[["render",function(e,s,g,h,v,k){return a(),n("div",A,[l(i,{name:"fade"},{default:c((()=>["mm"==e.scene?(a(),n("div",K,[t("div",{class:"end-wrap scene-layer",style:x(`transform:scale(${e.scale})`)},[(a(),n(p,null,m([8,6,5,4,3,7,1],((e,s)=>t("span",{key:"mm-sapn-"+e,class:r(["mm-"+e,"mm-time-"+(s+1)])},null,2))),64)),t("span",{class:"mm-2 mm-start",onClick:s[0]||(s[0]=s=>e.onGameStart())}),R],4)])):o("",!0)])),_:1}),"game"==e.scene?(a(),n("div",B,[t("div",{class:r(["game-bg","bg-"+e.currTarget.id])},null,2),t("div",{class:r(["icon-logo",1===e.currTarget.id?"icon-logo-1":1===e.currTarget.id?"icon-logo-3":"icon-logo-2"])},null,2),l(i,{name:"scene"},{default:c((()=>[e.visible?(a(),n("div",{key:0,class:"game-wrap",style:x(`transform:scale(${e.scale2})`)},[t("div",J,[t("span",{class:r("title-"+e.currTarget.id)},null,2)]),t("div",{class:r(["game-main","main-"+e.currTarget.id])},[1===e.currTarget.id?(a(),n(p,{key:0},m(4,(s=>t("span",{key:"main-1-select-"+s,class:r(["select-"+s,{active:e.currTarget.select===s}]),onClick:a=>e.currTarget.select=s},null,10,O))),64)):o("",!0),2===e.currTarget.id?(a(),n(p,{key:1},m(5,(s=>t("span",{key:"main-2-select-"+s,class:r(["select-"+s,{active:e.currTarget.select===s}]),onClick:a=>e.currTarget.select=s},null,10,E))),64)):o("",!0),3===e.currTarget.id?(a(),n(p,{key:2},m(9,(s=>t("span",{key:"main-3-select-"+s,class:r(["select-"+s,{active:e.currTarget.select===s}]),onClick:a=>e.currTarget.select=s},null,10,F))),64)):o("",!0),4===e.currTarget.id?(a(),n(p,{key:3},[t("div",Q,[t("span",{class:"swiper-prev btn-swiper-prev",onClick:s[1]||(s[1]=s=>e.currTarget.select<=1?e.currTarget.select=9:e.currTarget.select--)}),t("span",Y,[t("span",{class:r(["select-"+e.currTarget.select])},null,2)]),t("span",{class:"swiper-next btn-swiper-next",onClick:s[2]||(s[2]=s=>e.currTarget.select>=9?e.currTarget.select=1:e.currTarget.select++)})]),t("div",H,[t("span",{class:r(["text-"+e.currTarget.select])},null,2)])],64)):o("",!0),5===e.currTarget.id?(a(),n(p,{key:4},[1==e.currTarget.touch?(a(),n("div",V)):(a(),n(p,{key:1},[t("div",{class:"icon-prize",onClick:s[3]||(s[3]=$((s=>e.onPrizeTouch()),["stop"]))}),t("span",{class:"arrow",onClick:s[4]||(s[4]=$((s=>e.onPrizeTouch()),["stop"]))})],64))],64)):o("",!0),6===e.currTarget.id?(a(),n("span",{key:5,class:r(["select-"+e.currTarget.select,{active:e.currTarget.touch>0}]),onClick:s[5]||(s[5]=s=>e.onGameNext(1))},null,2)):o("",!0)],2),t("div",W,[t("span",{class:"btn-back",onClick:s[6]||(s[6]=s=>e.tips="back")}),t("span",{class:"btn-random",onClick:s[7]||(s[7]=s=>e.onGameSelectRandom())}),t("span",{class:"btn-next",onClick:s[8]||(s[8]=s=>e.onGameNext())})]),1===e.currTarget.id?(a(),n(p,{key:0},[X,Z,ee,se],64)):o("",!0),2===e.currTarget.id?(a(),n(p,{key:1},[ae,ne,le,ce],64)):o("",!0),3===e.currTarget.id?(a(),n(p,{key:2},[ie,te],64)):o("",!0),4===e.currTarget.id?(a(),n(p,{key:3},[re,oe,de],64)):o("",!0),5===e.currTarget.id?(a(),n(p,{key:4},[ue,pe,me,ge],64)):o("",!0),6===e.currTarget.id?(a(),n(p,{key:5},[he,ve],64)):o("",!0)],4)):o("",!0)])),_:1})])):o("",!0),d(t("div",ke,[l(i,{name:"fade"},{default:c((()=>["end"==e.dialogs?(a(),n("div",ye,[t("div",be,[t("div",{class:"end-wrap scene-layer end",style:x(`transform:scale(${e.scale})`)},[t("span",Te,[t("i",fe,I(e.userInfo.nickname),1)]),we,t("span",Ce,[t("img",{class:"end-span end-time-5",src:`${e.imgUrl}/end/5/${e.end.path5}.png`},null,8,xe),t("img",{class:"end-span end-time-6",src:`${e.imgUrl}/end/3/${e.end.path3}.png`},null,8,$e)]),t("span",Ie,[t("span",Ue,[(a(!0),n(p,null,m(e.end.path2+"",((s,l)=>(a(),n("img",{src:`${e.imgUrl}/end/2/${s}.png`,key:"num-"+l},null,8,ze)))),128))]),t("img",{class:"end-span end-time-9",src:`${e.imgUrl}/end/4/1/${e.end.path4}.png`},null,8,Me)]),t("span",Ge,[t("img",{class:"end-span end-time-11",src:`${e.imgUrl}/end/1/${e.end.path1}.png`},null,8,Se),t("img",{class:"end-span end-time-12",src:`${e.imgUrl}/end/6/${e.end.path6}.png`},null,8,_e)]),je,t("span",Ne,[t("img",{class:"end-span end-time-15",src:`${e.imgUrl}/end/role/${e.end.prizeId}.png`},null,8,qe),t("img",{class:"end-span end-time-16",src:`${e.imgUrl}/end/4/2/${e.end.prizeId}.png`},null,8,De)]),t("i",{class:"btn-wallpaper end-time-17",onClick:s[10]||(s[10]=$((s=>e.end.showCreate=!0),["stop"]))},[t("i",{class:"arrow end-time-18",onClick:s[9]||(s[9]=$((s=>e.end.showCreate=!0),["stop"]))})]),Le],4),t("span",{class:"btn-back",onClick:s[11]||(s[11]=s=>e.tips="back")})]),d(t("div",Pe,[l(i,{name:"scene-scale"},{default:c((()=>[e.end.showCreate?(a(),n("div",Ae,[t("img",{src:`${e.imgUrl}/end/wallpaper/${e.end.wallpaperId}.jpg`},null,8,Ke),t("div",Re,[t("span",{class:"btn-cancel",onClick:s[12]||(s[12]=s=>e.end.showCreate=!1)}),t("span",{class:"btn-save",onClick:s[13]||(s[13]=s=>e.downloadImage(`${e.imgUrl}/end/wallpaper/${e.end.wallpaperId}.jpg`))}),t("span",{class:"btn-look",onClick:s[14]||(s[14]=s=>e.onLook())})])])):o("",!0)])),_:1})],512),[[u,e.end.showCreate]])])):o("",!0)])),_:1}),e.tips?(a(),n("div",Be,["share"==e.tips?(a(),n("div",{key:0,class:"dialogs-share",onClick:s[15]||(s[15]=s=>e.tips="")},Je)):o("",!0),"back"==e.tips?(a(),n("div",Oe,[t("div",Ee,[t("span",{class:"back-close",onClick:s[16]||(s[16]=s=>e.tips="")}),t("span",{class:"back-cancel",onClick:s[17]||(s[17]=s=>e.tips="")}),t("span",{class:"back-ok",onClick:s[18]||(s[18]=s=>e.onGameBack())})])])):o("",!0)])):o("",!0)],512),[[u,e.dialogs||e.tips]]),e.audioList.length?(a(),n("div",{key:1,class:r(["btn-music",{active:e.volume}]),onClick:s[19]||(s[19]=s=>e.onPlayAudio("bgm",!0))},null,2)):o("",!0),d(t("div",Fe,[(a(!0),n(p,null,m(e.audioList,(e=>(a(),n("audio",{id:"audio-item-"+e.name,key:"audio-item-"+e.name,src:e.src,loop:e.loop??!1},null,8,Qe)))),128))],512),[[u,!1]])])}],["__scopeId","data-v-49cdf44e"]]);export{Ye as default};
