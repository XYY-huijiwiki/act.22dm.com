import{_ as a,d as s,u as e,r as i,a as n,o as t,c as l,b as p,w as o,v as d,e as u,i as c,n as r,f as v,t as m,g,p as y,h as f}from"./index-32760765.js";import{w as b}from"./wxjssdk-01858e27.js";const S=a=>(y("data-v-5b66438a"),a=a(),f(),a),x={class:"flex-1"},k={class:"input-box"},_=S((()=>p("span",{class:"input-label"}," 金额(分): ",-1))),w={class:"input-box"},j=S((()=>p("span",{class:"input-label"}," description: ",-1))),I=["disabled","onClick"],J={class:"msg"},N={class:"msg"},C=a(s({__name:"index",setup(a){var s;const y=(null==(s=e().params)?void 0:s.userInfo)??{};let f=(null==y?void 0:y.openid)??"",S=new b({jsApiList:[]}),C=i(!1),O=i(""),V=i(""),h=i(""),A=i("");const B=async()=>{if(!C.value){C.value=!0;try{const a=await g({openid:f,totalAmount:O.value+"",description:V.value,activityKey:"20260123",periodNum:1});h.value=JSON.stringify(a);const{code:s,data:e}=a;0===s&&T(e)}catch(a){h.value=JSON.stringify(a)}finally{C.value=!1}}},T=a=>{const{appId:s,timeStamp:e,nonceStr:i,signType:n,paySign:t}=a;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:s,timeStamp:e,nonceStr:i,package:a.packageVal,signType:n,paySign:t},(function(a){A.value=JSON.stringify(a),a.err_msg}))};return n((()=>{S.ready((()=>{}))})),(a,s)=>(t(),l("div",x,[p("div",k,[_,o(p("input",{class:"input",type:"number","onUpdate:modelValue":s[0]||(s[0]=a=>c(O)?O.value=a:O=a)},null,512),[[d,u(O)]])]),p("div",w,[j,o(p("input",{class:"input",type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>c(V)?V.value=a:V=a)},null,512),[[d,u(V)]])]),p("div",{class:r(["btn",{loading:u(C)}]),disabled:u(C),onClick:v(B,["stop"])},"支付 ",10,I),p("div",J,"接口返回:"+m(u(h)),1),p("div",N,"微信支付返回:"+m(u(A)),1)]))}}),[["__scopeId","data-v-5b66438a"]]);export{C as default};
