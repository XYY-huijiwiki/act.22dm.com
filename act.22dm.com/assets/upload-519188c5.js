import{_ as i,d as e,a as t,f as n,aO as a,a1 as l,o,c as s,F as c,v as d,j as p,z as r,A as g,aP as h}from"./index-8ef9f0fb.js";const m=e({name:"reviews",components:{},props:["dir","config"],emits:["onerror"],setup(i,e){var o,s,c;let d=[];const p=t({limit:(null==(o=i.config)?void 0:o.limit)??9,iconWidth:(null==(s=i.config)?void 0:s.iconWidth)??100,iconHeight:(null==(c=i.config)?void 0:c.iconHeight)??100,imgList:[]});return n((()=>{var t;null==(t=document.getElementById("file-input"))||t.addEventListener("change",(t=>{var n,l;let o=(null==(n=t.target)?void 0:n.files)??{};for(let s in o){let t=o[s];if((null==(l=i.config)?void 0:l.fizeSize)&&t.size>1024*i.config.fizeSize*1024)return void e.emit("onerror","请上传小于"+i.config.fizeSize+"M的图片哦~");a(t).then((i=>{1==p.limit?(p.imgList=[{type:"image",data:i}],d=[t]):(p.imgList.push({type:"image",data:i}),d.push(t))}))}}))})),{...l(p),onSelect:()=>{let i=document.getElementById("file-input");i&&i.click()},handleRemove:i=>{p.imgList.splice(i,1),d.splice(i,1)},handleUpload:async()=>new Promise(((i,e)=>{if(d.length){let t=[];d.forEach((i=>{const e=new FormData;e.append("file",i),t.push(h(e))})),Promise.all(t).then((e=>{i(e)})).catch((i=>{e(i)}))}else e("请选择图片")}))}}}),u={class:"upload-wrap"},f=["src","width","height"],v=["width","height"];const w=i(m,[["render",function(i,e,t,n,a,l){return o(),s("div",u,[(o(!0),s(c,null,d(i.imgList,((e,t)=>(o(),s("span",{key:"upload-item-"+t},[p("img",{src:e.data,width:i.iconWidth,height:i.iconHeight},null,8,f)])))),128)),p("span",{class:"upload-image-btn",onClick:e[0]||(e[0]=e=>i.onSelect())}),r(p("input",{id:"file-input",type:"file",name:"upload",multiple:"multiple",accept:".png,.jpg,.jpeg,.bmp",width:i.iconWidth,height:i.iconHeight},null,8,v),[[g,!1]])])}],["__scopeId","data-v-1e377652"]]);export{w as U};
