import{i as e,_ as a,d as l,u as o,r as n,g as s,a as t,b as i,e as u,f as d,h as r,p as c,s as v,o as p,c as m,j as y,k as f,F as g,l as k,m as b,n as h,t as x,w as C,q as T,v as w,x as z,y as L,z as I,T as $,A as D,B as _,C as N,D as j,E as P,G as K,H as U,I as E,J as M,K as S,L as O,M as W,N as A,O as H,P as q,Q as G}from"./index-cfeae59d.js";import{w as V}from"./wxjssdk-753d301d.js";import{g as B,a as R}from"./sign-54d406fa.js";import{o as F}from"./oss-70246db5.js";import{s as J,h as X}from"./loading-82df8069.js";import{i as Q,b as Y,r as Z}from"./isObjectLike-38825d63.js";function ee(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)}var ae="[object Symbol]";var le=/\s/;var oe=/^\s+/;function ne(e){return e?e.slice(0,function(e){for(var a=e.length;a--&&le.test(e.charAt(a)););return a}(e)+1).replace(oe,""):e}var se=NaN,te=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ue=/^0o[0-7]+$/i,de=parseInt;function re(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||Q(e)&&Y(e)==ae}(e))return se;if(ee(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=ee(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=ne(e);var l=ie.test(e);return l||ue.test(e)?de(e.slice(2),l?2:8):te.test(e)?se:+e}const ce=function(){return Z.Date.now()};var ve="Expected a function",pe=Math.max,me=Math.min;function ye(e,a,l){var o,n,s,t,i,u,d=0,r=!1,c=!1,v=!0;if("function"!=typeof e)throw new TypeError(ve);function p(a){var l=o,s=n;return o=n=void 0,d=a,t=e.apply(s,l)}function m(e){var l=e-u;return void 0===u||l>=a||l<0||c&&e-d>=s}function y(){var e=ce();if(m(e))return f(e);i=setTimeout(y,function(e){var l=a-(e-u);return c?me(l,s-(e-d)):l}(e))}function f(e){return i=void 0,v&&o?p(e):(o=n=void 0,t)}function g(){var e=ce(),l=m(e);if(o=arguments,n=this,u=e,l){if(void 0===i)return function(e){return d=e,i=setTimeout(y,a),r?p(e):t}(u);if(c)return clearTimeout(i),i=setTimeout(y,a),p(u)}return void 0===i&&(i=setTimeout(y,a)),t}return a=re(a)||0,ee(l)&&(r=!!l.leading,s=(c="maxWait"in l)?pe(re(l.maxWait)||0,a):s,v="trailing"in l?!!l.trailing:v),g.cancel=function(){void 0!==i&&clearTimeout(i),d=0,o=u=n=i=void 0},g.flush=function(){return void 0===i?t:f(ce())},g}const fe=(e=[])=>{let a=0;return e.map((e=>{var l;"merge"===(null==(l=null==e?void 0:e.extra)?void 0:l.type)&&a++})),a};const ge=e=>(H("data-v-13bef055"),e=e(),q(),e),ke={id:"page-20250726"},be={class:"bg-main"},he=_('<span class="icon-logo" data-v-13bef055></span><span class="icon-text-1" data-v-13bef055></span><div id="role" data-v-13bef055><span class="icon-role-1" data-v-13bef055></span><span class="icon-role-2" data-v-13bef055></span></div>',3),xe={id:"video-box"},Ce={id:"video",width:"720",height:"404",preload:"true",controls:""},Te=["src"],we=ge((()=>y("span",{class:"bg-video-poster"},null,-1))),ze=ge((()=>y("span",{class:"icon-text-2"},null,-1))),Le=ge((()=>y("div",{class:"icon-box-1"},null,-1))),Ie=ge((()=>y("span",{class:"icon-text-3"},null,-1))),$e=ge((()=>y("div",{class:"icon-box-2"},null,-1))),De={id:"lottery"},_e={class:"lottery-box"},Ne=ge((()=>y("span",{class:"icon-lottery-0"},null,-1))),je=ge((()=>y("span",{class:"icon-lottery-7"},null,-1))),Pe={class:"lottery-count"},Ke=["onClick"],Ue={class:"icon-box-3"},Ee={class:"share-count"},Me=ge((()=>y("span",{class:"icon-text-4"},null,-1))),Se={class:"icon-box-4"},Oe={class:"upload-box"},We=_('<div class="upload-prize" data-v-13bef055><div class="upload-prize-box" data-v-13bef055><span class="icon-upload-prize-4" data-v-13bef055></span><span class="icon-upload-prize-1" data-v-13bef055></span><span class="icon-upload-prize-2" data-v-13bef055></span><span class="icon-upload-prize-3" data-v-13bef055></span></div></div>',1),Ae=ge((()=>y("span",{class:"icon-text-5-1"},null,-1))),He={id:"page-dialogs"},qe={class:"dialogs-record-merge bg-record-merge"},Ge={class:"prize-box"},Ve=["onClick"],Be={class:"prize-name"},Re={class:"prize-time"},Fe={class:"dialogs-merge bg-merge"},Je={class:"merge-prize-box"},Xe={class:"code-1"},Qe={class:"code-2"},Ye={key:1,class:"code-tips-word"},Ze={class:"dialogs-tips-use"},ea=ge((()=>y("div",null,[y("div",{class:"bg-tips-use"})],-1))),aa={key:0},la={class:"dialogs-upload bg-upload"},oa={class:"form-upload"},na={key:0,class:"icon-upload-img"},sa=["src"],ta={class:"dialogs-record-upload bg-record-upload"},ia=["onClick"],ua={key:0,class:"icon-upload-img"},da=["src"],ra={class:"dialogs-record-upload-prize bg-upload-prize"},ca={key:0,class:"mask"},va={class:"dialogs-address bg-address"},pa={class:"dialogs-card bg-card"},ma=[ge((()=>y("div",{class:"dialogs-share icon-share"},null,-1)))],ya={key:0,class:"dialogs-gif"},fa=[ge((()=>y("div",{class:"gif-box"},[y("div",{class:"icon-role-1"}),y("div",{class:"icon-role-2"})],-1)))],ga={key:0,class:"dialogs-black-list"},ka={id:"audio-list"},ba=["id","src","loop"],ha=a(l({__name:"index",setup(a){var l;let _,H,q,Q="https://cpe-oss-h5.oss-cn-shenzhen.aliyuncs.com/h5/20250726/image-v1";const{proxy:Y}=G();let Z=new V({});const ae=o();let le="",oe=0,ne=n({randomCard:[.01,.2,.4,.6,.8,1],whiteList:["ofN_u6nBbWm3k8KmgyWetjEKIGaE"],pageHiddenDelay:3e3,throttledPageHiddenTime:3e3,maoyanLink:"https://co.maoyan.com/x/1568020",xyyCardCountLimitOneDay:38,uploadSize:10,uploadLimitCount:6,mergerPrizeName:["18周年限定票根","周边优惠券(100-20)","周边优惠券(400-100)","异国破晓吧唧帆布袋","电影限定周边礼包","喜羊羊超能铃铛娃娃","电影兑换码","狂舞新宇宙限定透卡"],blackList:["ofN_u6jeCVqruoGToYRw3OtZpGII"]});const se=(null==(l=ae.params)?void 0:l.userInfo)??{};q=(null==se?void 0:se.unionid)??"";const te=n(s(1300)),ie=n(""),ue=n([]),de=n(t()),re=n(!1),ce=n(!1),ve=n(!1),pe=n(!1),me=n(!1),ge=n(!1),ha=n(0),xa=n(null),Ca=n(null),Ta=n(null),wa=n(!1),za=n(!1),La=n(!1),Ia=n(!1),$a=n(!1),Da=n(!1),_a=n({file:null,fileData:null,uploadType:0,wxid:"",phone:"",name:"",address:""}),Na=i({volume:!1,audioList:[{name:"bgm",src:`${Q}/audio/bgm.mp3`,loop:!0}]});let ja=null,Pa="ofN_u6o0InL3IJ_Asp3qp8MIlxH4";const Ka=u((()=>{var a,l,o;let n=0;const s=ne.value.whiteList.includes(q);s&&(n=99);const t=((a=[])=>{let l=0;return a.map((a=>{var o;e(a.addTime)&&"lottery"===(null==(o=null==a?void 0:a.extra)?void 0:o.type)&&l++})),l})(ue.value),i=((a=[])=>{let l=0;return a.map((a=>{var o;e(a.addTime)&&"share"===(null==(o=null==a?void 0:a.extra)?void 0:o.type)&&l++})),l})(ue.value),u=((e=[],a=!1)=>{const l=a?30:0;let o=[{id:1,count:l},{id:2,count:l},{id:3,count:l},{id:4,count:l},{id:5,count:l},{id:6,count:l}];e.map((e=>{var a;if("lottery"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)){const a=e.extra.getId;o[a-1].count++}}));const n=fe(e);return n>0&&o.map((e=>{e.count-=n,e.count=e.count<0?0:e.count})),o})(ue.value,s),d=((a=[])=>{let l=["","",""],o=0;return a.map((a=>{var n;"upload"===(null==(n=null==a?void 0:a.extra)?void 0:n.type)&&(l[a.extra.uploadType-1]=a.extra.url,e(a.addTime)&&o++)})),{list:l,todayCount:o}})(ue.value),r=!u.some((e=>e.count<=0)),c=ue.value.some((e=>{var a;return"look"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})),v=ue.value.filter((e=>{var a;return"merge"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})),p=(null==(l=null==(a=ue.value.find((e=>{var a;return"upload-prize"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})))?void 0:a.extra)?void 0:l.getId)??0;c&&(n+=1),re.value&&(n+=1),ce.value&&(n+=3),n+=i>2?2:i,n-=t,n=n>0?n:0,!s&&n>7&&($a.value=!0);const m=(null==(o=u.find((e=>1===e.id)))?void 0:o.count)??0,y=ue.value.some((e=>{var a,l;return"lottery"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)&&1===(null==(l=null==e?void 0:e.extra)?void 0:l.getId)&&e.addTime}));return{cardList:u,lotteryCount:n,lotteryCountToday:t,shareCountToday:i,hasAllCard:r,hasLook:c,hasPlayGame:ce.value,mergeData:v,mergeCount:v.length,xyyCardCount:m,uploadList:d.list,uploadTodayCount:d.todayCount,uploadPrize:{id:p,address:La.value},mergePrize:{address:za.value},isWhiteList:s,hasXyyCardToday:y}})),Ua=e=>{xa.value={id:e},ie.value="card"},Ea=async()=>{if(!pe.value)if(Ka.value.hasAllCard){if(me.value)return;me.value=!0;const e=await Ha();if(e.length){const a=e[N(0,e.length-1)],{id:l}=a;qa(l);const o={...a.extra};ie.value="gif",await Aa({...o,type:"merge"}),setTimeout((()=>{Ta.value=o,ie.value="",me.value=!1}),1300)}else Ga("系统繁忙, 请稍后再试"),me.value=!1}else Ga("集齐所有卡片后才能合成哦")},Ma=e=>{e?(P(`${e}`),Ga("复制成功")):Ia.value=!0},Sa=(e,a=null)=>{var l,o;if("maoyan"==e)de.value?(ie.value="ercode",Z.onSaveImage(Q+"/background/ercode.png"),Wa()):Ka.value.hasLook?window.open(ne.value.maoyanLink):(Aa({type:"look"}),setTimeout((()=>{window.open(ne.value.maoyanLink)}),100));else if("ercode-preview"==e)Z.onSaveImage(Q+"/background/ercode.png");else if("game"==e)K.push({path:"/202507",query:{special:1}});else if("share"==e)ge.value=!0,Wa();else if("upload"==e){if(Ka.value.uploadTodayCount>=ne.value.uploadLimitCount)return void Ga(`每天只能上传${ne.value.uploadLimitCount}次图片, 请明天再来`);ie.value="upload",_a.value.file=null,_a.value.fileData=null,_a.value.uploadType=a}else if("upload-record-item"==e){const e=Ka.value.uploadList[a];e?Z.onSaveImage(e):Sa("upload",a+1)}else"record-merge-prize"==e?Ka.value.mergeData.length?ie.value="record-merge":Ga("暂无中奖记录"):"record-upload"==e?ie.value="record-upload":"record-upload-prize"==e?(null==(l=Ka.value.uploadPrize)?void 0:l.id)?(Ca.value={...Ka.value.uploadPrize,type:"upload"},ie.value="record-upload-prize"):Ga("暂无获奖"):"address"==e&&((null==(o=Ka.value.uploadPrize)?void 0:o.address)?Ga("已填写收货地址"):ie.value="address")},Oa=async e=>{const a=e.target.files;if(a&&a.length>0){const e=a[0];if(e.size>1024*ne.value.uploadSize*1024)return void Ga(`上传的图片大小不能超过${ne.value.uploadSize}M`);_a.value.file=e;const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{_a.value.fileData=l.result,U((()=>{v()}))}}},Wa=function(e,a,l){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ee(l)&&(o="leading"in l?!!l.leading:o,n="trailing"in l?!!l.trailing:n),ye(e,a,{leading:o,maxWait:a,trailing:n})}((()=>{(ie.value||ge.value)&&setTimeout((()=>{ge.value?Ka.value.shareCountToday<2&&Aa({type:"share"}):"ercode"===ie.value&&(Ka.value.hasLook||Aa({type:"look"}))}),ne.value.pageHiddenDelay)}),ne.value.throttledPageHiddenTime),Aa=async(e={},a=!0,l=q)=>{e.isMiniProgramEnv=de.value?1:0;const o=N(0,1e3),n=N(0,20);let s=B({k:le,unionid:l,score:o,level:n});const t=(new Date).getTime();await M({ownerUnionid:l,activityKey:_,gameScore:o,levelNum:n,playTime:t,extra:e,k:le,s:s});const i={addTime:t,extra:{...e}};return a&&ue.value.push(i),i},Ha=async()=>new Promise((e=>{j({activityKey:"20250726-code",periodNum:H,ownerUnionid:Pa}).then((({code:a,data:l})=>{if(0===a){let a=[];l.map((e=>{(new Date).getTime()>=new Date(e.addTime).getTime()&&1===e.status&&a.push(e)})),e(a)}})).catch((a=>{e([])}))})),qa=e=>{let a=R({k:le,unionid:q,id:e});W({ownerUnionid:q,id:e,status:0,k:le,s:a})},Ga=e=>{Y.$Message.success(e)},Va=(e,a=!1)=>{A(Na,e,a)},Ba=()=>{Z.timestamp?Math.abs((new Date).getTime()-Z.timestamp)>3e5&&(Da.value=!0,$a.value=!0):setTimeout((()=>{Ba()}),1e3)};return d((async()=>{var a,l;J("加载中..."),oe++,_=(null==(a=ae.meta)?void 0:a.activityKey)??"20250726",H=(null==(l=ae.meta)?void 0:l.periodNum)??1,r({activityKey:_}).then((({code:a,data:l})=>{var o;0===a&&(le=l.k,l.extra&&(ne.value=l.extra,(null==(o=ne.value.blackList)?void 0:o.includes(q))&&($a.value=!0)),r({activityKey:"20250726-code"}).then((({code:a,data:l})=>{0===a&&(l.k,(async()=>{ve.value=!0,j({activityKey:_,periodNum:H,ownerUnionid:q}).then((async({code:a,data:l})=>{if(0===a&&l){for(let a=0;a<l.length;a++){const{type:o=""}=l[a].extra??{};e(l[a].addTime)&&("login"===o&&(re.value=!0),"game"===o&&(ce.value=!0))}re.value||(await Aa({type:"login",isToday:e((new Date).getTime())?1:0,kkk:oe})).addTime&&(re.value=!0),ue.value=l,await O({unionid:q,activityKey:"20250726-merge-prize",periodNum:H}).then((({code:e,data:a})=>{(null==a?void 0:a.name)&&(za.value=!0)})),await O({unionid:q,activityKey:"20250726-upload-prize",periodNum:H}).then((({code:e,data:a})=>{var l;(null==a?void 0:a.name)?La.value=!0:(null==(l=Ka.value.uploadPrize)?void 0:l.id)&&Sa("record-upload-prize")}))}else Ga("获取记录异常,请刷新后再试");setTimeout((()=>{X()}),200)})).finally((()=>{ve.value=!1}))})())})))})),Z.ready((()=>{var e,a,l;Ba(),Va("bgm",!0),Z.updateShareData({title:(null==(e=ae.meta)?void 0:e.title)??"",desc:(null==(a=ae.meta)?void 0:a.desc)??"",link:location.origin+ae.path,imgUrl:(null==(l=ae.meta)?void 0:l.imgUrl)??""}),document.addEventListener("visibilitychange",(e=>{document.hidden?c():Na.volume&&(Va("bgm",!0),v())}))}))})),(a,l)=>(p(),m(g,null,[y("div",ke,[y("div",be,[he,y("div",xe,[y("video",Ce,[y("source",{src:f(Q)+"/v.mp4",type:"video/mp4"},null,8,Te)]),wa.value?k("",!0):(p(),m(g,{key:0},[we,y("span",{class:"btn-play",onClick:l[0]||(l[0]=e=>(Va("bgm",!0),wa.value=!0,void document.getElementById("video").play()))})],64))]),ze,Le,Ie,$e,y("div",De,[y("div",_e,[Ne,(p(),m(g,null,b([1,2,3,4,5,6],(e=>y("span",{key:e,class:h(["lottery-item",`icon-lottery-${e}`,{active:!pe.value&&Ka.value.cardList[e-1].count||ha.value%6===e||ha.value>0&&ha.value%6==0&&6===e}])},null,2))),64)),(p(!0),m(g,null,b(Ka.value.cardList,((e,a)=>(p(),m("span",{class:h(["card-count",`card-count-${e.id}`]),key:"card-count-"+e.id},x(e.count),3)))),128)),je]),y("span",{class:"btn-lottery-start",onClick:l[1]||(l[1]=C((a=>(async()=>{if(Ka.value.lotteryCount>0){if(pe.value||me.value)return;pe.value=!0;const l=Math.random();let o=0;for(let e=0;e<ne.value.randomCard.length;e++)if(l<ne.value.randomCard[e]){o=e+1;break}if(1===o){if(Ka.value.hasXyyCardToday||Ka.value.mergeCount+Ka.value.xyyCardCount>=3&&!Ka.value.isWhiteList)o=N(2,6);else try{const a=await j({activityKey:_,periodNum:H,ownerUnionid:Pa});0===a.code&&a.data&&a.data.filter((a=>{var l;return e(a.addTime)&&"card-xyy"===(null==(l=null==a?void 0:a.extra)?void 0:l.type)})).length>=ne.value.xyyCardCountLimitOneDay&&(o=N(2,6))}catch(a){o=N(2,6)}1===o&&await Aa({type:"card-xyy",unionid:q},!1,Pa)}const n={type:"lottery",getId:o},s=await Aa(n,!1);ja=setInterval((()=>{ha.value++,ha.value>=24&&ha.value%6==o-1&&(ja&&clearInterval(ja),ha.value=o,s.addTime&&ue.value.push(s),Ua(o),setTimeout((()=>{pe.value=!1}),2e3))}),150)}else Ga("抽卡次数不足，请先完成下方任务清单")})()),["stop"]))},[y("span",Pe,x(Ka.value.lotteryCount),1)]),y("span",{class:"btn-record-merge-prize",onClick:l[2]||(l[2]=C((e=>Sa("record-merge-prize")),["stop"]))}),T(y("span",{class:"btn-merge",onClick:C(Ea,["stop"])},null,8,Ke),[[w,!me.value]])]),y("div",Ue,[y("span",{class:"box-btn btn-maoyan",onClick:l[3]||(l[3]=e=>Sa("maoyan"))}),y("span",{class:"box-btn btn-game",onClick:l[4]||(l[4]=e=>Sa("game"))}),y("span",{class:"box-btn btn-share",onClick:l[5]||(l[5]=e=>Sa("share"))}),y("span",Ee,"今日分享成功次数"+x(Ka.value.shareCountToday)+"/2",1)]),Me,y("div",Se,[y("div",Oe,[y("span",{onClick:l[6]||(l[6]=C((e=>Sa("upload",1)),["stop"]))}),y("span",{onClick:l[7]||(l[7]=C((e=>Sa("upload",2)),["stop"]))}),y("span",{onClick:l[8]||(l[8]=C((e=>Sa("upload",3)),["stop"]))})]),y("span",{class:"btn-record-upload",onClick:l[9]||(l[9]=e=>Sa("record-upload"))}),y("span",{class:"btn-record-upload-prize",onClick:l[10]||(l[10]=e=>Sa("record-upload-prize"))}),We]),Ae])]),T(y("div",He,[z($,{name:"fade"},{default:L((()=>["record-merge"===ie.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",qe,[y("span",{class:"btn-close",onClick:l[11]||(l[11]=C((e=>ie.value=""),["stop"]))}),y("div",Ge,[(p(!0),m(g,null,b(Ka.value.mergeData,((e,a)=>(p(),m("div",{class:"icon-prize-bg",key:"prize-box-"+a,onClick:a=>(e=>{Ta.value={...e.extra}})(e)},[y("span",Be,x(f(ne).mergerPrizeName[e.extra.getId-1]),1),y("span",Re," 合成时间: "+x(-1!==(e.addTime+"").indexOf(":")?e.addTime:"刚刚"),1)],8,Ve)))),128))])])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[Ta.value&&"address"!==ie.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",Fe,[y("div",Je,[y("span",{class:h(["merge-prize-img",`icon-merge-prize-${Ta.value.getId}`])},[7===Ta.value.getId?(p(),m(g,{key:0},[y("span",Xe,x(Ta.value.code[0]),1),y("span",Qe,x(Ta.value.code[1]),1),y("span",{class:"code-1-copy",onClick:l[12]||(l[12]=C((e=>Ma(Ta.value.code[0])),["stop"]))}),y("span",{class:"code-2-copy",onClick:l[13]||(l[13]=C((e=>Ma(Ta.value.code[1])),["stop"]))})],64)):k("",!0)],2),7===Ta.value.getId?(p(),m("span",{key:0,class:"btn-code-tips",onClick:l[14]||(l[14]=C((e=>Ma("")),["stop"]))})):k("",!0),[2,3].includes(Ta.value.getId)?(p(),m("span",Ye," 温暮提示：兑换链接仅限一个ID领取，请勿随意分享和向他人展示，且该奖不支按二次补发。 ")):k("",!0)]),y("span",{class:"merge-close",onClick:l[15]||(l[15]=C((e=>Ta.value=null),["stop"]))}),y("span",{class:"merge-ok",onClick:l[16]||(l[16]=C((e=>(()=>{var e;const{getType:a,code:l=[]}=Ta.value;if(1===a)2===(null==l?void 0:l.length)&&(P(`${l[0]} ${l[1]}`),Ga("兑换券码已复制到剪贴板")),Ta.value=null;else if(2===a){if(null==l?void 0:l.length){const e=l[0];de.value?(P(e),Ga("链接已复制到剪贴板, 请在浏览器中打开")):window.open(e)}Ta.value=null}else 3===a&&((null==(e=Ka.value.mergePrize)?void 0:e.address)?Ga("已填写收货地址"):ie.value="address")})()),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[Ia.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",Ze,[ea,y("span",{class:"btn-close",onClick:l[17]||(l[17]=C((e=>Ia.value=!1),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["upload"===ie.value?(p(),m("div",aa,[y("div",la,[y("div",oa,[_a.value.fileData?(p(),m("img",{key:1,src:_a.value.fileData},null,8,sa)):(p(),m("span",na)),y("input",{type:"file",name:"form-upload",accept:".png,.jpg,.jpeg,.bmp",onChange:Oa},null,32)]),T(y("input",{class:"form-name",name:"form-name",type:"text","onUpdate:modelValue":l[18]||(l[18]=e=>_a.value.wxid=e),autocomplete:"off"},null,512),[[D,_a.value.wxid]]),y("span",{class:"btn-close",onClick:l[19]||(l[19]=C((e=>{ie.value="",_a.value.fileData=null,_a.value.file=null}),["stop"]))}),y("span",{class:"btn-upload",onClick:l[20]||(l[20]=e=>(()=>{const{file:e,uploadType:a,fileData:l,wxid:o}=_a.value;if(!o||!l)return void Ga("请填写完整信息");if(ve.value)return;ve.value=!0,J("上传中...");const n=e.type.split("/")[1];let s=`h5/20250726/upload/${E()}.${n}`;F(e,s).then((e=>{Aa({type:"upload",url:e,uploadType:a,wxid:o}),Ga("上传成功"),ie.value=""})).catch((e=>{Ga(e)})).finally((()=>{ve.value=!1,X()}))})())})])])):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["record-upload"===ie.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",ta,[(p(!0),m(g,null,b(Ka.value.uploadList,((e,a)=>(p(),m("span",{key:"upload-record-item-"+a,class:h(["upload-record-item",`upload-record-item-${a+1}`]),onClick:e=>Sa("upload-record-item",a)},[e?(p(),m("img",{key:1,src:e},null,8,da)):(p(),m("span",ua))],10,ia)))),128)),y("span",{class:"btn-close",onClick:l[21]||(l[21]=C((e=>ie.value=""),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["record-upload-prize"===ie.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",ra,[y("span",{class:h(["prize-img",["icon-upload-prize"]])}),y("span",{class:"btn-close",onClick:l[22]||(l[22]=C((e=>ie.value=""),["stop"]))}),y("span",{class:"upload-prize-get",onClick:l[23]||(l[23]=C((e=>Sa("address","upload")),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["address"===ie.value?(p(),m("div",ca,[y("div",va,[T(y("input",{class:"address-name","onUpdate:modelValue":l[24]||(l[24]=e=>_a.value.name=e),autocomplete:"off",name:"name"},null,512),[[D,_a.value.name]]),T(y("input",{class:"address-phone","onUpdate:modelValue":l[25]||(l[25]=e=>_a.value.phone=e),autocomplete:"off",name:"phone"},null,512),[[D,_a.value.phone]]),T(y("input",{class:"address-address","onUpdate:modelValue":l[26]||(l[26]=e=>_a.value.address=e),autocomplete:"off",name:"address"},null,512),[[D,_a.value.address]]),y("span",{class:"btn-address-ok",onClick:l[27]||(l[27]=C((e=>(()=>{let{phone:e,name:a,address:l}=_a.value,o="",n={};if(Ca.value?(o="upload",n={...Ca.value}):Ta.value&&(o="merge",n={...Ta.value}),a&&e&&l)if(11==e.length){if(ve.value)return;ve.value=!0,J("提交中..."),S({activityKey:`20250726-${o}-prize`,periodNum:H,ownerUnionid:q,address:l,name:a,phone:e,extra:n}).then((()=>{Ga("提交成功"),ie.value="","upload"===o?La.value=!0:za.value=!0})).finally((()=>{ve.value=!1,X()}))}else Ga("请填写11位手机号码");else Ga("请输入正确的信息")})()),["stop"]))}),y("span",{class:"btn-close",onClick:l[28]||(l[28]=C((e=>ie.value=""),["stop"]))})])])):k("",!0)])),_:1}),z($,{name:"fade-card"},{default:L((()=>["card"===ie.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",pa,[y("span",{class:h(["card-img",`icon-card-${xa.value.id}`])},null,2),y("span",{class:"card-ok",onClick:l[29]||(l[29]=e=>ie.value="")})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["ercode"===ie.value?(p(),m("div",{key:0,style:I(`transform:scale(${te.value})`)},[y("div",{class:"dialogs-ercode bg-ercode",onClick:l[31]||(l[31]=C((e=>Sa("ercode-preview")),["self"]))},[y("span",{class:"btn-close",onClick:l[30]||(l[30]=C((e=>ie.value=""),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[ge.value?(p(),m("div",{key:0,onClick:l[32]||(l[32]=e=>ge.value=!1)},ma)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["gif"===ie.value?(p(),m("div",ya,fa)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[$a.value?(p(),m("div",ga,x(Da.value?"客户端时间异常，请修改时间后重试":"您的账号活动数据异常，请联系官方处理"),1)):k("",!0)])),_:1})],512),[[w,ie.value||ge.value||Ta.value||Ia.value||$a.value]]),Na.audioList.length?(p(),m(g,{key:0},[y("div",{class:h(["btn-music",[{active:Na.volume}]]),onClick:l[33]||(l[33]=e=>Va("bgm",!0))},null,2),T(y("div",ka,[(p(!0),m(g,null,b(Na.audioList,(e=>(p(),m("audio",{id:"audio-item-"+e.name,key:"audio-item-"+e.name,src:e.src,loop:e.loop??!1},null,8,ba)))),128))],512),[[w,!1]])],64)):k("",!0)],64))}}),[["__scopeId","data-v-13bef055"]]);export{ha as default};
