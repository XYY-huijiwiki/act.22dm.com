import{i as e,_ as a,d as l,u as o,r as n,g as s,a as t,b as i,e as u,f as d,h as r,p as c,s as v,o as p,c as m,j as y,k as f,F as g,l as k,m as b,n as h,t as x,w as C,q as T,v as w,x as z,y as L,z as I,T as $,A as D,B as _,C as N,D as j,E as P,G as K,H as U,I as E,J as M,K as S,L as O,M as W,N as A,O as H,P as q,Q as G}from"./index-ee9247d9.js";import{w as V}from"./wxjssdk-28688b30.js";import{g as B,a as R}from"./sign-54d406fa.js";import{o as F}from"./oss-7ad32ae4.js";import{s as J,h as X}from"./loading-091fd66c.js";import{i as Q,b as Y,r as Z}from"./isObjectLike-38825d63.js";function ee(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)}var ae="[object Symbol]";var le=/\s/;var oe=/^\s+/;function ne(e){return e?e.slice(0,function(e){for(var a=e.length;a--&&le.test(e.charAt(a)););return a}(e)+1).replace(oe,""):e}var se=NaN,te=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ue=/^0o[0-7]+$/i,de=parseInt;function re(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||Q(e)&&Y(e)==ae}(e))return se;if(ee(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=ee(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=ne(e);var l=ie.test(e);return l||ue.test(e)?de(e.slice(2),l?2:8):te.test(e)?se:+e}const ce=function(){return Z.Date.now()};var ve="Expected a function",pe=Math.max,me=Math.min;function ye(e,a,l){var o,n,s,t,i,u,d=0,r=!1,c=!1,v=!0;if("function"!=typeof e)throw new TypeError(ve);function p(a){var l=o,s=n;return o=n=void 0,d=a,t=e.apply(s,l)}function m(e){var l=e-u;return void 0===u||l>=a||l<0||c&&e-d>=s}function y(){var e=ce();if(m(e))return f(e);i=setTimeout(y,function(e){var l=a-(e-u);return c?me(l,s-(e-d)):l}(e))}function f(e){return i=void 0,v&&o?p(e):(o=n=void 0,t)}function g(){var e=ce(),l=m(e);if(o=arguments,n=this,u=e,l){if(void 0===i)return function(e){return d=e,i=setTimeout(y,a),r?p(e):t}(u);if(c)return clearTimeout(i),i=setTimeout(y,a),p(u)}return void 0===i&&(i=setTimeout(y,a)),t}return a=re(a)||0,ee(l)&&(r=!!l.leading,s=(c="maxWait"in l)?pe(re(l.maxWait)||0,a):s,v="trailing"in l?!!l.trailing:v),g.cancel=function(){void 0!==i&&clearTimeout(i),d=0,o=u=n=i=void 0},g.flush=function(){return void 0===i?t:f(ce())},g}const fe=(e=[])=>{let a=0;return e.map((e=>{var l;"merge"===(null==(l=null==e?void 0:e.extra)?void 0:l.type)&&a++})),a};const ge=e=>(H("data-v-acb5efa8"),e=e(),q(),e),ke={id:"page-20250726"},be={class:"bg-main"},he=_('<span class="icon-logo" data-v-acb5efa8></span><span class="icon-text-1" data-v-acb5efa8></span><div id="role" data-v-acb5efa8><span class="icon-role-1" data-v-acb5efa8></span><span class="icon-role-2" data-v-acb5efa8></span></div>',3),xe={id:"video-box"},Ce={id:"video",width:"720",height:"404",preload:"true",controls:""},Te=["src"],we=ge((()=>y("span",{class:"bg-video-poster"},null,-1))),ze=ge((()=>y("span",{class:"icon-text-2"},null,-1))),Le=ge((()=>y("div",{class:"icon-box-1"},null,-1))),Ie=ge((()=>y("span",{class:"icon-text-3"},null,-1))),$e=ge((()=>y("div",{class:"icon-box-2"},null,-1))),De={id:"lottery"},_e={class:"lottery-box"},Ne=ge((()=>y("span",{class:"icon-lottery-0"},null,-1))),je=ge((()=>y("span",{class:"icon-lottery-7"},null,-1))),Pe={class:"lottery-count"},Ke=["onClick"],Ue={class:"icon-box-3"},Ee={class:"share-count"},Me=ge((()=>y("span",{class:"icon-text-4"},null,-1))),Se={class:"icon-box-4"},Oe={class:"upload-box"},We=_('<div class="upload-prize" data-v-acb5efa8><div class="upload-prize-box" data-v-acb5efa8><span class="icon-upload-prize-4" data-v-acb5efa8></span><span class="icon-upload-prize-1" data-v-acb5efa8></span><span class="icon-upload-prize-2" data-v-acb5efa8></span><span class="icon-upload-prize-3" data-v-acb5efa8></span></div></div>',1),Ae=ge((()=>y("span",{class:"icon-text-5-1"},null,-1))),He={id:"page-dialogs"},qe={class:"dialogs-record-merge bg-record-merge"},Ge={class:"prize-box"},Ve=["onClick"],Be={class:"prize-name"},Re={class:"prize-time"},Fe={class:"dialogs-merge bg-merge"},Je={class:"merge-prize-box"},Xe={class:"code-1"},Qe={class:"code-2"},Ye={key:1,class:"code-tips-word"},Ze={class:"dialogs-tips-use"},ea=ge((()=>y("div",null,[y("div",{class:"bg-tips-use"})],-1))),aa={key:0},la={class:"dialogs-upload bg-upload"},oa={class:"form-upload"},na={key:0,class:"icon-upload-img"},sa=["src"],ta={class:"dialogs-record-upload bg-record-upload"},ia=["onClick"],ua={key:0,class:"icon-upload-img"},da=["src"],ra={class:"dialogs-record-upload-prize bg-upload-prize"},ca={key:0,class:"mask"},va={class:"dialogs-address bg-address"},pa={class:"dialogs-card bg-card"},ma=[ge((()=>y("div",{class:"dialogs-share icon-share"},null,-1)))],ya={key:0,class:"dialogs-gif"},fa=[ge((()=>y("div",{class:"gif-box"},[y("div",{class:"icon-role-1"}),y("div",{class:"icon-role-2"})],-1)))],ga={key:0,class:"dialogs-black-list"},ka={id:"audio-list"},ba=["id","src","loop"],ha=a(l({__name:"index",setup(a){var l;let _,H,q,Q="https://cpe-oss-h5.oss-cn-shenzhen.aliyuncs.com/h5/20250726/image-v1";const{proxy:Y}=G();let Z=new V({});const ae=o();let le="",oe=n({randomCard:[.01,.2,.4,.6,.8,1],whiteList:["ofN_u6nBbWm3k8KmgyWetjEKIGaE"],pageHiddenDelay:3e3,throttledPageHiddenTime:3e3,maoyanLink:"https://co.maoyan.com/x/1568020",xyyCardCountLimitOneDay:38,uploadSize:10,uploadLimitCount:6,mergerPrizeName:["18周年限定票根","周边优惠券(100-20)","周边优惠券(400-100)","异国破晓吧唧帆布袋","电影限定周边礼包","喜羊羊超能铃铛娃娃","电影兑换码","狂舞新宇宙限定透卡"],blackList:["ofN_u6jeCVqruoGToYRw3OtZpGII"]});const ne=(null==(l=ae.params)?void 0:l.userInfo)??{};q=(null==ne?void 0:ne.unionid)??"";const se=n(s(1300)),te=n(""),ie=n([]),ue=n(t()),de=n(!1),re=n(!1),ce=n(!1),ve=n(!1),pe=n(!1),me=n(!1),ge=n(0),ha=n(null),xa=n(null),Ca=n(null),Ta=n(!1),wa=n(!1),za=n(!1),La=n(!1),Ia=n(!1),$a=n(!1),Da=n({file:null,fileData:null,uploadType:0,wxid:"",phone:"",name:"",address:""}),_a=i({volume:!1,audioList:[{name:"bgm",src:`${Q}/audio/bgm.mp3`,loop:!0}]});let Na=null,ja="ofN_u6o0InL3IJ_Asp3qp8MIlxH4";const Pa=u((()=>{var a,l,o;let n=0;const s=oe.value.whiteList.includes(q);s&&(n=99);const t=((a=[])=>{let l=0;return a.map((a=>{var o;e(a.addTime)&&"lottery"===(null==(o=null==a?void 0:a.extra)?void 0:o.type)&&l++})),l})(ie.value),i=((a=[])=>{let l=0;return a.map((a=>{var o;e(a.addTime)&&"share"===(null==(o=null==a?void 0:a.extra)?void 0:o.type)&&l++})),l})(ie.value),u=((e=[],a=!1)=>{const l=a?30:0;let o=[{id:1,count:l},{id:2,count:l},{id:3,count:l},{id:4,count:l},{id:5,count:l},{id:6,count:l}];e.map((e=>{var a;if("lottery"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)){const a=e.extra.getId;o[a-1].count++}}));const n=fe(e);return n>0&&o.map((e=>{e.count-=n,e.count=e.count<0?0:e.count})),o})(ie.value,s),d=((a=[])=>{let l=["","",""],o=0;return a.map((a=>{var n;"upload"===(null==(n=null==a?void 0:a.extra)?void 0:n.type)&&(l[a.extra.uploadType-1]=a.extra.url,e(a.addTime)&&o++)})),{list:l,todayCount:o}})(ie.value),r=!u.some((e=>e.count<=0)),c=ie.value.some((e=>{var a;return"look"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})),v=ie.value.filter((e=>{var a;return"merge"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})),p=(null==(l=null==(a=ie.value.find((e=>{var a;return"upload-prize"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})))?void 0:a.extra)?void 0:l.getId)??0;c&&(n+=1),de.value&&(n+=1),re.value&&(n+=3),n+=i>2?2:i,n-=t,n=n>0?n:0,!s&&n>7&&(Ia.value=!0);const m=(null==(o=u.find((e=>1===e.id)))?void 0:o.count)??0,y=ie.value.some((e=>{var a,l;return"lottery"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)&&1===(null==(l=null==e?void 0:e.extra)?void 0:l.getId)&&e.addTime}));return{cardList:u,lotteryCount:n,lotteryCountToday:t,shareCountToday:i,hasAllCard:r,hasLook:c,hasPlayGame:re.value,mergeData:v,mergeCount:v.length,xyyCardCount:m,uploadList:d.list,uploadTodayCount:d.todayCount,uploadPrize:{id:p,address:za.value},mergePrize:{address:wa.value},isWhiteList:s,hasXyyCardToday:y}})),Ka=e=>{ha.value={id:e},te.value="card"},Ua=async()=>{if(!ve.value)if(Pa.value.hasAllCard){if(pe.value)return;pe.value=!0;const e=await Aa();if(e.length){const a=e[N(0,e.length-1)],{id:l}=a;Ha(l);const o={...a.extra};te.value="gif",await Wa({...o,type:"merge"}),setTimeout((()=>{Ca.value=o,te.value="",pe.value=!1}),1300)}else qa("系统繁忙, 请稍后再试"),pe.value=!1}else qa("集齐所有卡片后才能合成哦")},Ea=e=>{e?(P(`${e}`),qa("复制成功")):La.value=!0},Ma=(e,a=null)=>{var l,o;if("maoyan"==e)ue.value?(te.value="ercode",Z.onSaveImage(Q+"/background/ercode.png"),Oa()):Pa.value.hasLook?window.open(oe.value.maoyanLink):(Wa({type:"look"}),setTimeout((()=>{window.open(oe.value.maoyanLink)}),100));else if("ercode-preview"==e)Z.onSaveImage(Q+"/background/ercode.png");else if("game"==e)K.push({path:"/202507",query:{special:1}});else if("share"==e)me.value=!0,Oa();else if("upload"==e){if(Pa.value.uploadTodayCount>=oe.value.uploadLimitCount)return void qa(`每天只能上传${oe.value.uploadLimitCount}次图片, 请明天再来`);te.value="upload",Da.value.file=null,Da.value.fileData=null,Da.value.uploadType=a}else if("upload-record-item"==e){const e=Pa.value.uploadList[a];e?Z.onSaveImage(e):Ma("upload",a+1)}else"record-merge-prize"==e?Pa.value.mergeData.length?te.value="record-merge":qa("暂无中奖记录"):"record-upload"==e?te.value="record-upload":"record-upload-prize"==e?(null==(l=Pa.value.uploadPrize)?void 0:l.id)?(xa.value={...Pa.value.uploadPrize,type:"upload"},te.value="record-upload-prize"):qa("暂无获奖"):"address"==e&&((null==(o=Pa.value.uploadPrize)?void 0:o.address)?qa("已填写收货地址"):te.value="address")},Sa=async e=>{const a=e.target.files;if(a&&a.length>0){const e=a[0];if(e.size>1024*oe.value.uploadSize*1024)return void qa(`上传的图片大小不能超过${oe.value.uploadSize}M`);Da.value.file=e;const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{Da.value.fileData=l.result,U((()=>{v()}))}}},Oa=function(e,a,l){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ee(l)&&(o="leading"in l?!!l.leading:o,n="trailing"in l?!!l.trailing:n),ye(e,a,{leading:o,maxWait:a,trailing:n})}((()=>{(te.value||me.value)&&setTimeout((()=>{me.value?Pa.value.shareCountToday<2&&Wa({type:"share"}):"ercode"===te.value&&(Pa.value.hasLook||Wa({type:"look"}))}),oe.value.pageHiddenDelay)}),oe.value.throttledPageHiddenTime),Wa=async(e={},a=!0,l=q)=>{e.isMiniProgramEnv=ue.value?1:0;const o=N(0,1e3),n=N(0,20);let s=B({k:le,unionid:l,score:o,level:n});const t=(new Date).getTime();await M({ownerUnionid:l,activityKey:_,gameScore:o,levelNum:n,playTime:t,extra:e,k:le,s:s});const i={addTime:t,extra:{...e}};return a&&ie.value.push(i),i},Aa=async()=>new Promise((e=>{j({activityKey:"20250726-code",periodNum:H,ownerUnionid:ja}).then((({code:a,data:l})=>{if(0===a){let a=[];l.map((e=>{(new Date).getTime()>=new Date(e.addTime).getTime()&&1===e.status&&a.push(e)})),e(a)}})).catch((a=>{e([])}))})),Ha=e=>{let a=R({k:le,unionid:q,id:e});W({ownerUnionid:q,id:e,status:0,k:le,s:a})},qa=e=>{Y.$Message.success(e)},Ga=(e,a=!1)=>{A(_a,e,a)},Va=()=>{Z.timestamp?Math.abs((new Date).getTime()-Z.timestamp)>3e5&&($a.value=!0,Ia.value=!0):setTimeout((()=>{Va()}),1e3)};return d((async()=>{var a,l;J("加载中..."),_=(null==(a=ae.meta)?void 0:a.activityKey)??"20250726",H=(null==(l=ae.meta)?void 0:l.periodNum)??1,r({activityKey:_}).then((({code:a,data:l})=>{var o;0===a&&(le=l.k,l.extra&&(oe.value=l.extra,(null==(o=oe.value.blackList)?void 0:o.includes(q))&&(Ia.value=!0)),r({activityKey:"20250726-code"}).then((({code:a,data:l})=>{0===a&&(l.k,(async()=>{ce.value=!0,j({activityKey:_,periodNum:H,ownerUnionid:q}).then((async({code:a,data:l})=>{if(0===a&&l){for(let a=0;a<l.length;a++){const{type:o=""}=l[a].extra??{};e(l[a].addTime)&&("login"===o&&(de.value=!0),"game"===o&&(re.value=!0))}de.value||(await Wa({type:"login"})).addTime&&(de.value=!0),ie.value=l,await O({unionid:q,activityKey:"20250726-merge-prize",periodNum:H}).then((({code:e,data:a})=>{(null==a?void 0:a.name)&&(wa.value=!0)})),await O({unionid:q,activityKey:"20250726-upload-prize",periodNum:H}).then((({code:e,data:a})=>{var l;(null==a?void 0:a.name)?za.value=!0:(null==(l=Pa.value.uploadPrize)?void 0:l.id)&&Ma("record-upload-prize")}))}else qa("获取记录异常,请刷新后再试");setTimeout((()=>{X()}),200)})).finally((()=>{ce.value=!1}))})())})))})),Z.ready((()=>{var e,a,l;Va(),Ga("bgm",!0),Z.updateShareData({title:(null==(e=ae.meta)?void 0:e.title)??"",desc:(null==(a=ae.meta)?void 0:a.desc)??"",link:location.origin+ae.path,imgUrl:(null==(l=ae.meta)?void 0:l.imgUrl)??""}),document.addEventListener("visibilitychange",(e=>{document.hidden?c():_a.volume&&(Ga("bgm",!0),v())}))}))})),(a,l)=>(p(),m(g,null,[y("div",ke,[y("div",be,[he,y("div",xe,[y("video",Ce,[y("source",{src:f(Q)+"/v.mp4",type:"video/mp4"},null,8,Te)]),Ta.value?k("",!0):(p(),m(g,{key:0},[we,y("span",{class:"btn-play",onClick:l[0]||(l[0]=e=>(Ga("bgm",!0),Ta.value=!0,void document.getElementById("video").play()))})],64))]),ze,Le,Ie,$e,y("div",De,[y("div",_e,[Ne,(p(),m(g,null,b([1,2,3,4,5,6],(e=>y("span",{key:e,class:h(["lottery-item",`icon-lottery-${e}`,{active:!ve.value&&Pa.value.cardList[e-1].count||ge.value%6===e||ge.value>0&&ge.value%6==0&&6===e}])},null,2))),64)),(p(!0),m(g,null,b(Pa.value.cardList,((e,a)=>(p(),m("span",{class:h(["card-count",`card-count-${e.id}`]),key:"card-count-"+e.id},x(e.count),3)))),128)),je]),y("span",{class:"btn-lottery-start",onClick:l[1]||(l[1]=C((a=>(async()=>{if(Pa.value.lotteryCount>0){if(ve.value||pe.value)return;ve.value=!0;const l=Math.random();let o=0;for(let e=0;e<oe.value.randomCard.length;e++)if(l<oe.value.randomCard[e]){o=e+1;break}if(1===o){if(Pa.value.hasXyyCardToday||Pa.value.mergeCount+Pa.value.xyyCardCount>=3&&!Pa.value.isWhiteList)o=N(2,6);else try{const a=await j({activityKey:_,periodNum:H,ownerUnionid:ja});0===a.code&&a.data&&a.data.filter((a=>{var l;return e(a.addTime)&&"card-xyy"===(null==(l=null==a?void 0:a.extra)?void 0:l.type)})).length>=oe.value.xyyCardCountLimitOneDay&&(o=N(2,6))}catch(a){o=N(2,6)}1===o&&await Wa({type:"card-xyy",unionid:q},!1,ja)}const n={type:"lottery",getId:o},s=await Wa(n,!1);Na=setInterval((()=>{ge.value++,ge.value>=24&&ge.value%6==o-1&&(Na&&clearInterval(Na),ge.value=o,s.addTime&&ie.value.push(s),Ka(o),setTimeout((()=>{ve.value=!1}),2e3))}),150)}else qa("抽卡次数不足，请先完成下方任务清单")})()),["stop"]))},[y("span",Pe,x(Pa.value.lotteryCount),1)]),y("span",{class:"btn-record-merge-prize",onClick:l[2]||(l[2]=C((e=>Ma("record-merge-prize")),["stop"]))}),T(y("span",{class:"btn-merge",onClick:C(Ua,["stop"])},null,8,Ke),[[w,!pe.value]])]),y("div",Ue,[y("span",{class:"box-btn btn-maoyan",onClick:l[3]||(l[3]=e=>Ma("maoyan"))}),y("span",{class:"box-btn btn-game",onClick:l[4]||(l[4]=e=>Ma("game"))}),y("span",{class:"box-btn btn-share",onClick:l[5]||(l[5]=e=>Ma("share"))}),y("span",Ee,"今日分享成功次数"+x(Pa.value.shareCountToday)+"/2",1)]),Me,y("div",Se,[y("div",Oe,[y("span",{onClick:l[6]||(l[6]=C((e=>Ma("upload",1)),["stop"]))}),y("span",{onClick:l[7]||(l[7]=C((e=>Ma("upload",2)),["stop"]))}),y("span",{onClick:l[8]||(l[8]=C((e=>Ma("upload",3)),["stop"]))})]),y("span",{class:"btn-record-upload",onClick:l[9]||(l[9]=e=>Ma("record-upload"))}),y("span",{class:"btn-record-upload-prize",onClick:l[10]||(l[10]=e=>Ma("record-upload-prize"))}),We]),Ae])]),T(y("div",He,[z($,{name:"fade"},{default:L((()=>["record-merge"===te.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",qe,[y("span",{class:"btn-close",onClick:l[11]||(l[11]=C((e=>te.value=""),["stop"]))}),y("div",Ge,[(p(!0),m(g,null,b(Pa.value.mergeData,((e,a)=>(p(),m("div",{class:"icon-prize-bg",key:"prize-box-"+a,onClick:a=>(e=>{Ca.value={...e.extra}})(e)},[y("span",Be,x(f(oe).mergerPrizeName[e.extra.getId-1]),1),y("span",Re," 合成时间: "+x(-1!==(e.addTime+"").indexOf(":")?e.addTime:"刚刚"),1)],8,Ve)))),128))])])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[Ca.value&&"address"!==te.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",Fe,[y("div",Je,[y("span",{class:h(["merge-prize-img",`icon-merge-prize-${Ca.value.getId}`])},[7===Ca.value.getId?(p(),m(g,{key:0},[y("span",Xe,x(Ca.value.code[0]),1),y("span",Qe,x(Ca.value.code[1]),1),y("span",{class:"code-1-copy",onClick:l[12]||(l[12]=C((e=>Ea(Ca.value.code[0])),["stop"]))}),y("span",{class:"code-2-copy",onClick:l[13]||(l[13]=C((e=>Ea(Ca.value.code[1])),["stop"]))})],64)):k("",!0)],2),7===Ca.value.getId?(p(),m("span",{key:0,class:"btn-code-tips",onClick:l[14]||(l[14]=C((e=>Ea("")),["stop"]))})):k("",!0),[2,3].includes(Ca.value.getId)?(p(),m("span",Ye," 温暮提示：兑换链接仅限一个ID领取，请勿随意分享和向他人展示，且该奖不支按二次补发。 ")):k("",!0)]),y("span",{class:"merge-close",onClick:l[15]||(l[15]=C((e=>Ca.value=null),["stop"]))}),y("span",{class:"merge-ok",onClick:l[16]||(l[16]=C((e=>(()=>{var e;const{getType:a,code:l=[]}=Ca.value;if(1===a)2===(null==l?void 0:l.length)&&(P(`${l[0]} ${l[1]}`),qa("兑换券码已复制到剪贴板")),Ca.value=null;else if(2===a){if(null==l?void 0:l.length){const e=l[0];ue.value?(P(e),qa("链接已复制到剪贴板, 请在浏览器中打开")):window.open(e)}Ca.value=null}else 3===a&&((null==(e=Pa.value.mergePrize)?void 0:e.address)?qa("已填写收货地址"):te.value="address")})()),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[La.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",Ze,[ea,y("span",{class:"btn-close",onClick:l[17]||(l[17]=C((e=>La.value=!1),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["upload"===te.value?(p(),m("div",aa,[y("div",la,[y("div",oa,[Da.value.fileData?(p(),m("img",{key:1,src:Da.value.fileData},null,8,sa)):(p(),m("span",na)),y("input",{type:"file",name:"form-upload",accept:".png,.jpg,.jpeg,.bmp",onChange:Sa},null,32)]),T(y("input",{class:"form-name",name:"form-name",type:"text","onUpdate:modelValue":l[18]||(l[18]=e=>Da.value.wxid=e),autocomplete:"off"},null,512),[[D,Da.value.wxid]]),y("span",{class:"btn-close",onClick:l[19]||(l[19]=C((e=>{te.value="",Da.value.fileData=null,Da.value.file=null}),["stop"]))}),y("span",{class:"btn-upload",onClick:l[20]||(l[20]=e=>(()=>{const{file:e,uploadType:a,fileData:l,wxid:o}=Da.value;if(!o||!l)return void qa("请填写完整信息");if(ce.value)return;ce.value=!0,J("上传中...");const n=e.type.split("/")[1];let s=`h5/20250726/upload/${E()}.${n}`;F(e,s).then((e=>{Wa({type:"upload",url:e,uploadType:a,wxid:o}),qa("上传成功"),te.value=""})).catch((e=>{qa(e)})).finally((()=>{ce.value=!1,X()}))})())})])])):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["record-upload"===te.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",ta,[(p(!0),m(g,null,b(Pa.value.uploadList,((e,a)=>(p(),m("span",{key:"upload-record-item-"+a,class:h(["upload-record-item",`upload-record-item-${a+1}`]),onClick:e=>Ma("upload-record-item",a)},[e?(p(),m("img",{key:1,src:e},null,8,da)):(p(),m("span",ua))],10,ia)))),128)),y("span",{class:"btn-close",onClick:l[21]||(l[21]=C((e=>te.value=""),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["record-upload-prize"===te.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",ra,[y("span",{class:h(["prize-img",["icon-upload-prize"]])}),y("span",{class:"btn-close",onClick:l[22]||(l[22]=C((e=>te.value=""),["stop"]))}),y("span",{class:"upload-prize-get",onClick:l[23]||(l[23]=C((e=>Ma("address","upload")),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["address"===te.value?(p(),m("div",ca,[y("div",va,[T(y("input",{class:"address-name","onUpdate:modelValue":l[24]||(l[24]=e=>Da.value.name=e),autocomplete:"off",name:"name"},null,512),[[D,Da.value.name]]),T(y("input",{class:"address-phone","onUpdate:modelValue":l[25]||(l[25]=e=>Da.value.phone=e),autocomplete:"off",name:"phone"},null,512),[[D,Da.value.phone]]),T(y("input",{class:"address-address","onUpdate:modelValue":l[26]||(l[26]=e=>Da.value.address=e),autocomplete:"off",name:"address"},null,512),[[D,Da.value.address]]),y("span",{class:"btn-address-ok",onClick:l[27]||(l[27]=C((e=>(()=>{let{phone:e,name:a,address:l}=Da.value,o="",n={};if(xa.value?(o="upload",n={...xa.value}):Ca.value&&(o="merge",n={...Ca.value}),a&&e&&l)if(11==e.length){if(ce.value)return;ce.value=!0,J("提交中..."),S({activityKey:`20250726-${o}-prize`,periodNum:H,ownerUnionid:q,address:l,name:a,phone:e,extra:n}).then((()=>{qa("提交成功"),te.value="","upload"===o?za.value=!0:wa.value=!0})).finally((()=>{ce.value=!1,X()}))}else qa("请填写11位手机号码");else qa("请输入正确的信息")})()),["stop"]))}),y("span",{class:"btn-close",onClick:l[28]||(l[28]=C((e=>te.value=""),["stop"]))})])])):k("",!0)])),_:1}),z($,{name:"fade-card"},{default:L((()=>["card"===te.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",pa,[y("span",{class:h(["card-img",`icon-card-${ha.value.id}`])},null,2),y("span",{class:"card-ok",onClick:l[29]||(l[29]=e=>te.value="")})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["ercode"===te.value?(p(),m("div",{key:0,style:I(`transform:scale(${se.value})`)},[y("div",{class:"dialogs-ercode bg-ercode",onClick:l[31]||(l[31]=C((e=>Ma("ercode-preview")),["self"]))},[y("span",{class:"btn-close",onClick:l[30]||(l[30]=C((e=>te.value=""),["stop"]))})])],4)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[me.value?(p(),m("div",{key:0,onClick:l[32]||(l[32]=e=>me.value=!1)},ma)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["gif"===te.value?(p(),m("div",ya,fa)):k("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[Ia.value?(p(),m("div",ga,x($a.value?"客户端时间异常，请修改时间后重试":"您的账号活动数据异常，请联系官方处理"),1)):k("",!0)])),_:1})],512),[[w,te.value||me.value||Ca.value||La.value||Ia.value]]),_a.audioList.length?(p(),m(g,{key:0},[y("div",{class:h(["btn-music",[{active:_a.volume}]]),onClick:l[33]||(l[33]=e=>Ga("bgm",!0))},null,2),T(y("div",ka,[(p(!0),m(g,null,b(_a.audioList,(e=>(p(),m("audio",{id:"audio-item-"+e.name,key:"audio-item-"+e.name,src:e.src,loop:e.loop??!1},null,8,ba)))),128))],512),[[w,!1]])],64)):k("",!0)],64))}}),[["__scopeId","data-v-acb5efa8"]]);export{ha as default};
