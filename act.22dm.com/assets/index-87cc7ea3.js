import{i as e,_ as a,d as l,u as o,r as n,g as s,a as t,b as i,e as u,f as d,h as r,p as c,s as v,o as p,c as m,j as y,k as f,F as g,l as b,m as k,n as h,t as x,w as C,q as T,v as w,x as z,y as L,z as I,T as $,A as D,B as _,C as N,D as j,E as P,G as K,H as U,I as E,J as M,K as S,L as O,M as W,N as q,O as A,P as H,Q as G}from"./index-87c9ba8f.js";import{w as V}from"./wxjssdk-bba02966.js";import{g as B,a as R}from"./sign-54d406fa.js";import{o as F}from"./oss-f97623a2.js";import{s as J,h as X}from"./loading-4bd1cf31.js";import{i as Q,b as Y,r as Z}from"./isObjectLike-38825d63.js";function ee(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)}var ae="[object Symbol]";var le=/\s/;var oe=/^\s+/;function ne(e){return e?e.slice(0,function(e){for(var a=e.length;a--&&le.test(e.charAt(a)););return a}(e)+1).replace(oe,""):e}var se=NaN,te=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,ue=/^0o[0-7]+$/i,de=parseInt;function re(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||Q(e)&&Y(e)==ae}(e))return se;if(ee(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=ee(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=ne(e);var l=ie.test(e);return l||ue.test(e)?de(e.slice(2),l?2:8):te.test(e)?se:+e}const ce=function(){return Z.Date.now()};var ve="Expected a function",pe=Math.max,me=Math.min;function ye(e,a,l){var o,n,s,t,i,u,d=0,r=!1,c=!1,v=!0;if("function"!=typeof e)throw new TypeError(ve);function p(a){var l=o,s=n;return o=n=void 0,d=a,t=e.apply(s,l)}function m(e){var l=e-u;return void 0===u||l>=a||l<0||c&&e-d>=s}function y(){var e=ce();if(m(e))return f(e);i=setTimeout(y,function(e){var l=a-(e-u);return c?me(l,s-(e-d)):l}(e))}function f(e){return i=void 0,v&&o?p(e):(o=n=void 0,t)}function g(){var e=ce(),l=m(e);if(o=arguments,n=this,u=e,l){if(void 0===i)return function(e){return d=e,i=setTimeout(y,a),r?p(e):t}(u);if(c)return clearTimeout(i),i=setTimeout(y,a),p(u)}return void 0===i&&(i=setTimeout(y,a)),t}return a=re(a)||0,ee(l)&&(r=!!l.leading,s=(c="maxWait"in l)?pe(re(l.maxWait)||0,a):s,v="trailing"in l?!!l.trailing:v),g.cancel=function(){void 0!==i&&clearTimeout(i),d=0,o=u=n=i=void 0},g.flush=function(){return void 0===i?t:f(ce())},g}const fe=(e=[])=>{let a=0;return e.map((e=>{var l;"merge"===(null==(l=null==e?void 0:e.extra)?void 0:l.type)&&a++})),a};const ge=e=>(A("data-v-bcdfb650"),e=e(),H(),e),be={id:"page-20250726"},ke={class:"bg-main"},he=_('<span class="icon-logo" data-v-bcdfb650></span><span class="icon-text-1" data-v-bcdfb650></span><div id="role" data-v-bcdfb650><span class="icon-role-1" data-v-bcdfb650></span><span class="icon-role-2" data-v-bcdfb650></span></div>',3),xe={id:"video-box"},Ce={id:"video",width:"720",height:"404",preload:"true",controls:""},Te=["src"],we=ge((()=>y("span",{class:"bg-video-poster"},null,-1))),ze=ge((()=>y("span",{class:"icon-text-2"},null,-1))),Le=ge((()=>y("div",{class:"icon-box-1"},null,-1))),Ie=ge((()=>y("span",{class:"icon-text-3"},null,-1))),$e=ge((()=>y("div",{class:"icon-box-2"},null,-1))),De={id:"lottery"},_e={class:"lottery-box"},Ne=ge((()=>y("span",{class:"icon-lottery-0"},null,-1))),je=ge((()=>y("span",{class:"icon-lottery-7"},null,-1))),Pe={class:"lottery-count"},Ke=["onClick"],Ue={class:"icon-box-3"},Ee={class:"share-count"},Me=ge((()=>y("span",{class:"icon-text-4"},null,-1))),Se={class:"icon-box-4"},Oe={class:"upload-box"},We=_('<div class="upload-prize" data-v-bcdfb650><div class="upload-prize-box" data-v-bcdfb650><span class="icon-upload-prize-4" data-v-bcdfb650></span><span class="icon-upload-prize-1" data-v-bcdfb650></span><span class="icon-upload-prize-2" data-v-bcdfb650></span><span class="icon-upload-prize-3" data-v-bcdfb650></span></div></div>',1),qe=ge((()=>y("span",{class:"icon-text-5-1"},null,-1))),Ae={id:"page-dialogs"},He={class:"dialogs-record-merge bg-record-merge"},Ge={class:"prize-box"},Ve=["onClick"],Be={class:"prize-name"},Re={class:"prize-time"},Fe={class:"dialogs-merge bg-merge"},Je={class:"merge-prize-box"},Xe={class:"code-1"},Qe={class:"code-2"},Ye={key:1,class:"code-tips-word"},Ze={class:"dialogs-tips-use"},ea=ge((()=>y("div",null,[y("div",{class:"bg-tips-use"})],-1))),aa={key:0},la={class:"dialogs-upload bg-upload"},oa={class:"form-upload"},na={key:0,class:"icon-upload-img"},sa=["src"],ta={class:"dialogs-record-upload bg-record-upload"},ia=["onClick"],ua={key:0,class:"icon-upload-img"},da=["src"],ra={class:"dialogs-record-upload-prize bg-upload-prize"},ca={key:0,class:"mask"},va={class:"dialogs-address bg-address"},pa={class:"dialogs-card bg-card"},ma=[ge((()=>y("div",{class:"dialogs-share icon-share"},null,-1)))],ya={key:0,class:"dialogs-gif"},fa=[ge((()=>y("div",{class:"gif-box"},[y("div",{class:"icon-role-1"}),y("div",{class:"icon-role-2"})],-1)))],ga={key:0,class:"dialogs-black-list"},ba={id:"audio-list"},ka=["id","src","loop"],ha=a(l({__name:"index",setup(a){var l;let _,A,H,Q="https://cpe-oss-h5.oss-cn-shenzhen.aliyuncs.com/h5/20250726/image-v1";const{proxy:Y}=G();let Z=new V({});const ae=o();let le="",oe=0,ne=n({randomCard:[.01,.2,.4,.6,.8,1],whiteList:["ofN_u6nBbWm3k8KmgyWetjEKIGaE"],pageHiddenDelay:3e3,throttledPageHiddenTime:3e3,maoyanLink:"https://co.maoyan.com/x/1568020",xyyCardCountLimitOneDay:38,uploadSize:10,uploadLimitCount:6,mergerPrizeName:["18周年限定票根","周边优惠券(100-20)","周边优惠券(400-100)","异国破晓吧唧帆布袋","电影限定周边礼包","喜羊羊超能铃铛娃娃","电影兑换码","狂舞新宇宙限定透卡"],blackList:["ofN_u6jeCVqruoGToYRw3OtZpGII"]});const se=n(!1),te=(null==(l=ae.params)?void 0:l.userInfo)??{};H=(null==te?void 0:te.unionid)??"";const ie=n(s(1300)),ue=n(""),de=n([]),re=n(t()),ce=n(!1),ve=n(!1),pe=n(!1),me=n(!1),ge=n(!1),ha=n(!1),xa=n(0),Ca=n(null),Ta=n(null),wa=n(null),za=n(!1),La=n(!1),Ia=n(!1),$a=n(!1),Da=n(!1),_a=n(!1),Na=n({file:null,fileData:null,uploadType:0,wxid:"",phone:"",name:"",address:""}),ja=i({volume:!1,audioList:[{name:"bgm",src:`${Q}/audio/bgm.mp3`,loop:!0}]});let Pa=null,Ka="ofN_u6o0InL3IJ_Asp3qp8MIlxH4";const Ua=u((()=>{var a,l,o;let n=0;const s=ne.value.whiteList.includes(H);s&&(n=99);const t=((a=[])=>{let l=0;return a.map((a=>{var o;e(a.addTime)&&"lottery"===(null==(o=null==a?void 0:a.extra)?void 0:o.type)&&l++})),l})(de.value),i=((a=[])=>{let l=0;return a.map((a=>{var o;e(a.addTime)&&"share"===(null==(o=null==a?void 0:a.extra)?void 0:o.type)&&l++})),l})(de.value),u=((e=[],a=!1)=>{const l=a?30:0;let o=[{id:1,count:l},{id:2,count:l},{id:3,count:l},{id:4,count:l},{id:5,count:l},{id:6,count:l}];e.map((e=>{var a;if("lottery"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)){const a=e.extra.getId;o[a-1].count++}}));const n=fe(e);return n>0&&o.map((e=>{e.count-=n,e.count=e.count<0?0:e.count})),o})(de.value,s),d=((a=[])=>{let l=["","",""],o=0;return a.map((a=>{var n;"upload"===(null==(n=null==a?void 0:a.extra)?void 0:n.type)&&(l[a.extra.uploadType-1]=a.extra.url,e(a.addTime)&&o++)})),{list:l,todayCount:o}})(de.value),r=!u.some((e=>e.count<=0)),c=de.value.some((e=>{var a;return"look"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})),v=de.value.filter((e=>{var a;return"merge"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})),p=(null==(l=null==(a=de.value.find((e=>{var a;return"upload-prize"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)})))?void 0:a.extra)?void 0:l.getId)??0;c&&(n+=1),ce.value&&(n+=1),ve.value&&(n+=3),n+=i>2?2:i,n-=t,n=n>0?n:0,!s&&n>7&&(Da.value=!0);const m=(null==(o=u.find((e=>1===e.id)))?void 0:o.count)??0,y=de.value.some((e=>{var a,l;return"lottery"===(null==(a=null==e?void 0:e.extra)?void 0:a.type)&&1===(null==(l=null==e?void 0:e.extra)?void 0:l.getId)&&e.addTime}));return{cardList:u,lotteryCount:n,lotteryCountToday:t,shareCountToday:i,hasAllCard:r,hasLook:c,hasPlayGame:ve.value,mergeData:v,mergeCount:v.length,xyyCardCount:m,uploadList:d.list,uploadTodayCount:d.todayCount,uploadPrize:{id:p,address:Ia.value},mergePrize:{address:La.value},isWhiteList:s,hasXyyCardToday:y}})),Ea=e=>{Ca.value={id:e},ue.value="card"},Ma=async()=>{if(!me.value)if(Ua.value.hasAllCard){if(ge.value)return;ge.value=!0;const e=await Ha();if(e.length){const a=e[N(0,e.length-1)],{id:l}=a;Ga(l);const o={...a.extra};ue.value="gif",await Aa({...o,type:"merge"}),setTimeout((()=>{wa.value=o,ue.value="",ge.value=!1}),1300)}else se.value?(Va(`系统繁忙, 请稍后再试:${H}`),Aa({type:"error-onMergeCard",res:e,unionid:H,ts:(new Date).getTime(),gameScore:Ua.value},!1)):Va("系统繁忙, 请稍后再试"),ge.value=!1}else Va("集齐所有卡片后才能合成哦")},Sa=e=>{e?(P(`${e}`),Va("复制成功")):$a.value=!0},Oa=(e,a=null)=>{var l,o;if("maoyan"==e)re.value?(ue.value="ercode",Z.onSaveImage(Q+"/background/ercode.png"),qa()):Ua.value.hasLook?window.open(ne.value.maoyanLink):(Aa({type:"look"}),setTimeout((()=>{window.open(ne.value.maoyanLink)}),100));else if("ercode-preview"==e)Z.onSaveImage(Q+"/background/ercode.png");else if("game"==e)K.push({path:"/202507",query:{special:1}});else if("share"==e)ha.value=!0,qa();else if("upload"==e){if(Ua.value.uploadTodayCount>=ne.value.uploadLimitCount)return void Va(`每天只能上传${ne.value.uploadLimitCount}次图片, 请明天再来`);ue.value="upload",Na.value.file=null,Na.value.fileData=null,Na.value.uploadType=a}else if("upload-record-item"==e){const e=Ua.value.uploadList[a];e?Z.onSaveImage(e):Oa("upload",a+1)}else"record-merge-prize"==e?Ua.value.mergeData.length?ue.value="record-merge":Va("暂无中奖记录"):"record-upload"==e?ue.value="record-upload":"record-upload-prize"==e?(null==(l=Ua.value.uploadPrize)?void 0:l.id)?(Ta.value={...Ua.value.uploadPrize,type:"upload"},ue.value="record-upload-prize"):Va("暂无获奖"):"address"==e&&((null==(o=Ua.value.uploadPrize)?void 0:o.address)?Va("已填写收货地址"):ue.value="address")},Wa=async e=>{const a=e.target.files;if(a&&a.length>0){const e=a[0];if(e.size>1024*ne.value.uploadSize*1024)return void Va(`上传的图片大小不能超过${ne.value.uploadSize}M`);Na.value.file=e;const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{Na.value.fileData=l.result,U((()=>{v()}))}}},qa=function(e,a,l){var o=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return ee(l)&&(o="leading"in l?!!l.leading:o,n="trailing"in l?!!l.trailing:n),ye(e,a,{leading:o,maxWait:a,trailing:n})}((()=>{(ue.value||ha.value)&&setTimeout((()=>{ha.value?Ua.value.shareCountToday<2&&Aa({type:"share"}):"ercode"===ue.value&&(Ua.value.hasLook||Aa({type:"look"}))}),ne.value.pageHiddenDelay)}),ne.value.throttledPageHiddenTime),Aa=async(e={},a=!0,l=H)=>{e.isMiniProgramEnv=re.value?1:0;const o=N(0,1e3),n=N(0,20);let s=B({k:le,unionid:l,score:o,level:n});const t=(new Date).getTime();await M({ownerUnionid:l,activityKey:_,gameScore:o,levelNum:n,playTime:t,extra:e,k:le,s:s});const i={addTime:t,extra:{...e}};return a&&de.value.push(i),i},Ha=async()=>new Promise((e=>{j({activityKey:"20250726-code",periodNum:A,ownerUnionid:Ka}).then((({code:a,data:l})=>{if(0===a){let a=[];l.map((e=>{(new Date).getTime()>=new Date(e.addTime).getTime()&&1===e.status&&a.push(e)})),e(a)}})).catch((a=>{e([])}))})),Ga=e=>{let a=R({k:le,unionid:H,id:e});W({ownerUnionid:H,id:e,status:0,k:le,s:a})},Va=e=>{Y.$Message.success(e)},Ba=(e,a=!1)=>{q(ja,e,a)},Ra=()=>{Z.timestamp?Math.abs((new Date).getTime()-Z.timestamp)>3e5&&(_a.value=!0,Da.value=!0):setTimeout((()=>{Ra()}),1e3)};return d((async()=>{var a,l,o;J("加载中..."),se.value="1"===(null==(a=ae.query)?void 0:a.debug),se.value&&Va("debug模式已开启"),oe++,_=(null==(l=ae.meta)?void 0:l.activityKey)??"20250726",A=(null==(o=ae.meta)?void 0:o.periodNum)??1,r({activityKey:_}).then((({code:a,data:l})=>{var o;0===a&&(le=l.k,l.extra&&(ne.value=l.extra,(null==(o=ne.value.blackList)?void 0:o.includes(H))&&(Da.value=!0)),r({activityKey:"20250726-code"}).then((({code:a,data:l})=>{0===a&&(l.k,(async()=>{pe.value=!0,j({activityKey:_,periodNum:A,ownerUnionid:H}).then((async({code:a,data:l})=>{if(0===a&&l){for(let a=0;a<l.length;a++){const{type:o=""}=l[a].extra??{};e(l[a].addTime)&&("login"===o&&(ce.value=!0),"game"===o&&(ve.value=!0))}ce.value||(await Aa({type:"login",isToday:e((new Date).getTime())?1:0,kkk:oe})).addTime&&(ce.value=!0),de.value=l,await O({unionid:H,activityKey:"20250726-merge-prize",periodNum:A}).then((({code:e,data:a})=>{(null==a?void 0:a.name)&&(La.value=!0)})),await O({unionid:H,activityKey:"20250726-upload-prize",periodNum:A}).then((({code:e,data:a})=>{var l;(null==a?void 0:a.name)?Ia.value=!0:(null==(l=Ua.value.uploadPrize)?void 0:l.id)&&Oa("record-upload-prize")}))}else Va("获取记录异常,请刷新后再试");setTimeout((()=>{X()}),200)})).finally((()=>{pe.value=!1}))})())})))})),Z.ready((()=>{var e,a,l;Ra(),Ba("bgm",!0),Z.updateShareData({title:(null==(e=ae.meta)?void 0:e.title)??"",desc:(null==(a=ae.meta)?void 0:a.desc)??"",link:location.origin+ae.path,imgUrl:(null==(l=ae.meta)?void 0:l.imgUrl)??""}),document.addEventListener("visibilitychange",(e=>{document.hidden?c():ja.volume&&(Ba("bgm",!0),v())}))}))})),(a,l)=>(p(),m(g,null,[y("div",be,[y("div",ke,[he,y("div",xe,[y("video",Ce,[y("source",{src:f(Q)+"/v.mp4",type:"video/mp4"},null,8,Te)]),za.value?b("",!0):(p(),m(g,{key:0},[we,y("span",{class:"btn-play",onClick:l[0]||(l[0]=e=>(Ba("bgm",!0),za.value=!0,void document.getElementById("video").play()))})],64))]),ze,Le,Ie,$e,y("div",De,[y("div",_e,[Ne,(p(),m(g,null,k([1,2,3,4,5,6],(e=>y("span",{key:e,class:h(["lottery-item",`icon-lottery-${e}`,{active:!me.value&&Ua.value.cardList[e-1].count||xa.value%6===e||xa.value>0&&xa.value%6==0&&6===e}])},null,2))),64)),(p(!0),m(g,null,k(Ua.value.cardList,((e,a)=>(p(),m("span",{class:h(["card-count",`card-count-${e.id}`]),key:"card-count-"+e.id},x(e.count),3)))),128)),je]),y("span",{class:"btn-lottery-start",onClick:l[1]||(l[1]=C((a=>(async()=>{if(Ua.value.lotteryCount>0){if(me.value||ge.value)return;me.value=!0;const l=Math.random();let o=0;for(let e=0;e<ne.value.randomCard.length;e++)if(l<ne.value.randomCard[e]){o=e+1;break}if(1===o){if(Ua.value.hasXyyCardToday||Ua.value.mergeCount+Ua.value.xyyCardCount>=3&&!Ua.value.isWhiteList)o=N(2,6);else try{const a=await j({activityKey:_,periodNum:A,ownerUnionid:Ka});0===a.code&&a.data&&a.data.filter((a=>{var l;return e(a.addTime)&&"card-xyy"===(null==(l=null==a?void 0:a.extra)?void 0:l.type)})).length>=ne.value.xyyCardCountLimitOneDay&&(o=N(2,6))}catch(a){o=N(2,6)}1===o&&await Aa({type:"card-xyy",unionid:H},!1,Ka)}const n={type:"lottery",getId:o},s=await Aa(n,!1);Pa=setInterval((()=>{xa.value++,xa.value>=24&&xa.value%6==o-1&&(Pa&&clearInterval(Pa),xa.value=o,s.addTime&&de.value.push(s),Ea(o),setTimeout((()=>{me.value=!1}),2e3))}),150)}else Va("抽卡次数不足，请先完成下方任务清单")})()),["stop"]))},[y("span",Pe,x(Ua.value.lotteryCount),1)]),y("span",{class:"btn-record-merge-prize",onClick:l[2]||(l[2]=C((e=>Oa("record-merge-prize")),["stop"]))}),T(y("span",{class:"btn-merge",onClick:C(Ma,["stop"])},null,8,Ke),[[w,!ge.value]])]),y("div",Ue,[y("span",{class:"box-btn btn-maoyan",onClick:l[3]||(l[3]=e=>Oa("maoyan"))}),y("span",{class:"box-btn btn-game",onClick:l[4]||(l[4]=e=>Oa("game"))}),y("span",{class:"box-btn btn-share",onClick:l[5]||(l[5]=e=>Oa("share"))}),y("span",Ee,"今日分享成功次数"+x(Ua.value.shareCountToday)+"/2",1)]),Me,y("div",Se,[y("div",Oe,[y("span",{onClick:l[6]||(l[6]=C((e=>Oa("upload",1)),["stop"]))}),y("span",{onClick:l[7]||(l[7]=C((e=>Oa("upload",2)),["stop"]))}),y("span",{onClick:l[8]||(l[8]=C((e=>Oa("upload",3)),["stop"]))})]),y("span",{class:"btn-record-upload",onClick:l[9]||(l[9]=e=>Oa("record-upload"))}),y("span",{class:"btn-record-upload-prize",onClick:l[10]||(l[10]=e=>Oa("record-upload-prize"))}),We]),qe])]),T(y("div",Ae,[z($,{name:"fade"},{default:L((()=>["record-merge"===ue.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",He,[y("span",{class:"btn-close",onClick:l[11]||(l[11]=C((e=>ue.value=""),["stop"]))}),y("div",Ge,[(p(!0),m(g,null,k(Ua.value.mergeData,((e,a)=>(p(),m("div",{class:"icon-prize-bg",key:"prize-box-"+a,onClick:a=>(e=>{wa.value={...e.extra}})(e)},[y("span",Be,x(f(ne).mergerPrizeName[e.extra.getId-1]),1),y("span",Re," 合成时间: "+x(-1!==(e.addTime+"").indexOf(":")?e.addTime:"刚刚"),1)],8,Ve)))),128))])])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[wa.value&&"address"!==ue.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",Fe,[y("div",Je,[y("span",{class:h(["merge-prize-img",`icon-merge-prize-${wa.value.getId}`])},[7===wa.value.getId?(p(),m(g,{key:0},[y("span",Xe,x(wa.value.code[0]),1),y("span",Qe,x(wa.value.code[1]),1),y("span",{class:"code-1-copy",onClick:l[12]||(l[12]=C((e=>Sa(wa.value.code[0])),["stop"]))}),y("span",{class:"code-2-copy",onClick:l[13]||(l[13]=C((e=>Sa(wa.value.code[1])),["stop"]))})],64)):b("",!0)],2),7===wa.value.getId?(p(),m("span",{key:0,class:"btn-code-tips",onClick:l[14]||(l[14]=C((e=>Sa("")),["stop"]))})):b("",!0),[2,3].includes(wa.value.getId)?(p(),m("span",Ye," 温暮提示：兑换链接仅限一个ID领取，请勿随意分享和向他人展示，且该奖不支按二次补发。 ")):b("",!0)]),y("span",{class:"merge-close",onClick:l[15]||(l[15]=C((e=>wa.value=null),["stop"]))}),y("span",{class:"merge-ok",onClick:l[16]||(l[16]=C((e=>(()=>{var e;const{getType:a,code:l=[]}=wa.value;if(1===a)2===(null==l?void 0:l.length)&&(P(`${l[0]} ${l[1]}`),Va("兑换券码已复制到剪贴板")),wa.value=null;else if(2===a){if(null==l?void 0:l.length){const e=l[0];re.value?(P(e),Va("链接已复制到剪贴板, 请在浏览器中打开")):window.open(e)}wa.value=null}else 3===a&&((null==(e=Ua.value.mergePrize)?void 0:e.address)?Va("已填写收货地址"):ue.value="address")})()),["stop"]))})])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[$a.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",Ze,[ea,y("span",{class:"btn-close",onClick:l[17]||(l[17]=C((e=>$a.value=!1),["stop"]))})])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["upload"===ue.value?(p(),m("div",aa,[y("div",la,[y("div",oa,[Na.value.fileData?(p(),m("img",{key:1,src:Na.value.fileData},null,8,sa)):(p(),m("span",na)),y("input",{type:"file",name:"form-upload",accept:".png,.jpg,.jpeg,.bmp",onChange:Wa},null,32)]),T(y("input",{class:"form-name",name:"form-name",type:"text","onUpdate:modelValue":l[18]||(l[18]=e=>Na.value.wxid=e),autocomplete:"off"},null,512),[[D,Na.value.wxid]]),y("span",{class:"btn-close",onClick:l[19]||(l[19]=C((e=>{ue.value="",Na.value.fileData=null,Na.value.file=null}),["stop"]))}),y("span",{class:"btn-upload",onClick:l[20]||(l[20]=e=>(()=>{const{file:e,uploadType:a,fileData:l,wxid:o}=Na.value;if(!o||!l)return void Va("请填写完整信息");if(pe.value)return;pe.value=!0,J("上传中...");const n=e.type.split("/")[1];let s=`h5/20250726/upload/${E()}.${n}`;F(e,s).then((e=>{Aa({type:"upload",url:e,uploadType:a,wxid:o}),Va("上传成功"),ue.value=""})).catch((e=>{Va(e)})).finally((()=>{pe.value=!1,X()}))})())})])])):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["record-upload"===ue.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",ta,[(p(!0),m(g,null,k(Ua.value.uploadList,((e,a)=>(p(),m("span",{key:"upload-record-item-"+a,class:h(["upload-record-item",`upload-record-item-${a+1}`]),onClick:e=>Oa("upload-record-item",a)},[e?(p(),m("img",{key:1,src:e},null,8,da)):(p(),m("span",ua))],10,ia)))),128)),y("span",{class:"btn-close",onClick:l[21]||(l[21]=C((e=>ue.value=""),["stop"]))})])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["record-upload-prize"===ue.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",ra,[y("span",{class:h(["prize-img",["icon-upload-prize"]])}),y("span",{class:"btn-close",onClick:l[22]||(l[22]=C((e=>ue.value=""),["stop"]))}),y("span",{class:"upload-prize-get",onClick:l[23]||(l[23]=C((e=>Oa("address","upload")),["stop"]))})])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["address"===ue.value?(p(),m("div",ca,[y("div",va,[T(y("input",{class:"address-name","onUpdate:modelValue":l[24]||(l[24]=e=>Na.value.name=e),autocomplete:"off",name:"name"},null,512),[[D,Na.value.name]]),T(y("input",{class:"address-phone","onUpdate:modelValue":l[25]||(l[25]=e=>Na.value.phone=e),autocomplete:"off",name:"phone"},null,512),[[D,Na.value.phone]]),T(y("input",{class:"address-address","onUpdate:modelValue":l[26]||(l[26]=e=>Na.value.address=e),autocomplete:"off",name:"address"},null,512),[[D,Na.value.address]]),y("span",{class:"btn-address-ok",onClick:l[27]||(l[27]=C((e=>(()=>{let{phone:e,name:a,address:l}=Na.value,o="",n={};if(Ta.value?(o="upload",n={...Ta.value}):wa.value&&(o="merge",n={...wa.value}),a&&e&&l)if(11==e.length){if(pe.value)return;pe.value=!0,J("提交中..."),S({activityKey:`20250726-${o}-prize`,periodNum:A,ownerUnionid:H,address:l,name:a,phone:e,extra:n}).then((()=>{Va("提交成功"),ue.value="","upload"===o?Ia.value=!0:La.value=!0})).finally((()=>{pe.value=!1,X()}))}else Va("请填写11位手机号码");else Va("请输入正确的信息")})()),["stop"]))}),y("span",{class:"btn-close",onClick:l[28]||(l[28]=C((e=>ue.value=""),["stop"]))})])])):b("",!0)])),_:1}),z($,{name:"fade-card"},{default:L((()=>["card"===ue.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",pa,[y("span",{class:h(["card-img",`icon-card-${Ca.value.id}`])},null,2),y("span",{class:"card-ok",onClick:l[29]||(l[29]=e=>ue.value="")})])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["ercode"===ue.value?(p(),m("div",{key:0,style:I(`transform:scale(${ie.value})`)},[y("div",{class:"dialogs-ercode bg-ercode",onClick:l[31]||(l[31]=C((e=>Oa("ercode-preview")),["self"]))},[y("span",{class:"btn-close",onClick:l[30]||(l[30]=C((e=>ue.value=""),["stop"]))})])],4)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[ha.value?(p(),m("div",{key:0,onClick:l[32]||(l[32]=e=>ha.value=!1)},ma)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>["gif"===ue.value?(p(),m("div",ya,fa)):b("",!0)])),_:1}),z($,{name:"fade"},{default:L((()=>[Da.value?(p(),m("div",ga,x(_a.value?"客户端时间异常，请修改时间后重试":"您的账号活动数据异常，请联系官方处理"),1)):b("",!0)])),_:1})],512),[[w,ue.value||ha.value||wa.value||$a.value||Da.value]]),ja.audioList.length?(p(),m(g,{key:0},[y("div",{class:h(["btn-music",[{active:ja.volume}]]),onClick:l[33]||(l[33]=e=>Ba("bgm",!0))},null,2),T(y("div",ba,[(p(!0),m(g,null,k(ja.audioList,(e=>(p(),m("audio",{id:"audio-item-"+e.name,key:"audio-item-"+e.name,src:e.src,loop:e.loop??!1},null,8,ka)))),128))],512),[[w,!1]])],64)):b("",!0)],64))}}),[["__scopeId","data-v-bcdfb650"]]);export{ha as default};
